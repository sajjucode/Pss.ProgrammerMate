/*!CK:3246475917!*//*1449234799,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oGpME"]); }

__d('ReactComposerMediaAttachmentButtons.react',['ReactComposerContextMixin','ReactComposerMediaUtils','ReactComposerPhotoUploadActions','ComposerTargetData','DOMContainer.react','FileInput.react','Grid.react','Link.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=n.GridItem,u=q.PropTypes,v=q.createClass({displayName:'ReactComposerMediaAttachmentButtons',mixins:[p,h],propTypes:{createAlbumLink:u.any,mediaAcceptParam:u.shape({photos:u.string,both:u.string}).isRequired,onFilesSelected:u.func.isRequired,showUploadPhotosButton:u.bool,targetData:u.instanceOf(k).isRequired},getDefaultProps:function(){return {mediaAcceptParam:{}};},getInitialState:function(){return {createAlbumLink:null};},componentDidMount:function(){var w=q.createElement(l,{className:"_3mc1",display:'block'},this.props.createAlbumLink);this.setState({createAlbumLink:w});},render:function(){var w=[];w.push(this._getUploadPhotosButton());if(this.state.createAlbumLink)w.push(q.createElement(t,{className:"_4l9a",key:'createAlbum'},q.createElement(o,{className:"_2709"},this.state.createAlbumLink)));return (q.createElement('div',{className:"_4l99"},q.createElement(n,{className:"_2707",cols:w.length},w.filter(function(x){return x!=null;}))));},_getUploadPhotosButton:function(){if(!this.props.showUploadPhotosButton)return null;var w=this.props.targetData.targetSupportsMultiplePhotos,x=this.props.mediaAcceptParam.both,y=w?s._("Upload Photos\/Video"):s._("Upload Photo\/Video");return (q.createElement(t,{className:"_4l9a",key:'uploadPhoto'},q.createElement(m,{accept:x,multiple:w,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},q.createElement(o,{className:"_2709"},q.createElement('div',{className:"_270a"},y)))));},_onUploadPhotosClick:function(){j.inputClicked(this.context.composerID);},_onFilesSelected:function(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());i.clearInput(this.refs.fileInput.getFileInput());}});f.exports=v;},null);