/*!CK:2966392232!*//*1449519519,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["w7nYE"]); }

__d('ReactComposerVideoUploader',['ReactComposerActions','ComposerEntryPointRef','ReactComposerPostUtilsCore','ReactComposerVideoUploadActions','ReactComposerVideoUploadStore','Arbiter','DOM','DOMClone','ErrorDialog','QE','React','ReactDOM','Run','SubscriptionsHandler','UserAgent','VideoUploadProcessingDialog.react','VideoUploadFile','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=b.URL||b.webkitURL||{};function aa(ba){this.$ReactComposerVideoUploader1=ba;this.$ReactComposerVideoUploader2=new u();!this.$ReactComposerVideoUploader1.composerID?y(0):undefined;!this.$ReactComposerVideoUploader1.container?y(0):undefined;!this.$ReactComposerVideoUploader1.progressBarInstance?y(0):undefined;!this.$ReactComposerVideoUploader1.uploader?y(0):undefined;this.$ReactComposerVideoUploader3=ba.uploader;this.$ReactComposerVideoUploader4=ba.composerID;this.$ReactComposerVideoUploader2.addSubscriptions(this.$ReactComposerVideoUploader3.subscribe('post-failed',this.$ReactComposerVideoUploader5.bind(this)),this.$ReactComposerVideoUploader3.subscribe('post-finished',this.$ReactComposerVideoUploader6.bind(this)),this.$ReactComposerVideoUploader3.subscribe('upload-failed',this.$ReactComposerVideoUploader7.bind(this)),this.$ReactComposerVideoUploader3.subscribe('upload-finished',this.$ReactComposerVideoUploader8.bind(this)));t.onLeave((function(){return this.$ReactComposerVideoUploader3.abandon();}).bind(this));t.onUnload((function(){return this.$ReactComposerVideoUploader3.abandon();}).bind(this));}aa.prototype.upload=function(ba,ca){this.$ReactComposerVideoUploader9=ca;var da=x.fromFileInput(ba);this.$ReactComposerVideoUploader3.upload(da);};aa.prototype.uploadFromFile=function(ba,ca){var da=ba.getFile();if(da&&z.createObjectURL)ca.fileURL=z.createObjectURL(da);this.$ReactComposerVideoUploader9=ca;this.$ReactComposerVideoUploader3.upload(ba);};aa.prototype.destroy=function(){this.$ReactComposerVideoUploader2.release();};aa.prototype.$ReactComposerVideoUploader10=function(ba){if(ba)p.show(ba.error_summary,ba.error_description);this.$ReactComposerVideoUploader1.progressBarInstance.reset();this.$ReactComposerVideoUploader3.abandon();h.postError(this.$ReactComposerVideoUploader4,null);};aa.prototype.$ReactComposerVideoUploader5=function(ba,ca){this.$ReactComposerVideoUploader10(ca);};aa.prototype.$ReactComposerVideoUploader6=function(ba,ca){j.handlePostSucceeded(this.$ReactComposerVideoUploader4);if(this.$ReactComposerVideoUploader1.composerEntryPointRef===i.TIMELINE)q.logExposure('www_optimistic_video_post');if(this.$ReactComposerVideoUploader1.shouldShowOptimisticVideoPost&&this.$ReactComposerVideoUploader1.composerEntryPointRef===i.TIMELINE){m.inform('videoUpload/complete',{videoID:ca.video_id,isToUserProfile:true,videoFileURL:ca.fileURL});}else s.render(r.createElement(w,{videoID:ca.video_id,show:true}),this.$ReactComposerVideoUploader1.container);this.$ReactComposerVideoUploader1.onPostSuccess&&this.$ReactComposerVideoUploader1.onPostSuccess();};aa.prototype.$ReactComposerVideoUploader7=function(ba,ca){this.$ReactComposerVideoUploader10(ca);var da=l.getVideo(this.$ReactComposerVideoUploader4);if(v.isBrowser('IE')){var ea=o.deepClone(da.input);n.replace(da.input,ea);}else da.input.value='';k.remove(this.$ReactComposerVideoUploader4);};aa.prototype.$ReactComposerVideoUploader8=function(){this.$ReactComposerVideoUploader3.post(this.$ReactComposerVideoUploader9);this.$ReactComposerVideoUploader1.onUploadSuccess&&this.$ReactComposerVideoUploader1.onUploadSuccess();};f.exports=aa;},null);