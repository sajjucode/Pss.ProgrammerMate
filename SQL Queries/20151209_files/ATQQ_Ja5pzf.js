/*!CK:1197536040!*//*1448894180,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["YLYjy"]); }

__d('EntstreamStoryDeduper',['DOM','csx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o={};for(var p=0;p<m.length;p++){var q=m[p],r=q.getAttribute('data-dedupekey');if(o[r]){if(n){j.hide(q);}else h.remove(q);}else o[r]=1;}}var l={dedupe:function(m,n){n=n||"._5jmm";var o=h.scry(m,n);o=o.filter(function(p){return p.getAttribute('data-dedupekey');});k(o,false);},dedupeHide:function(m,n){n=n||"._5jmm";var o=h.scry(m,n),p=o.filter(function(q){return q.getAttribute('data-dedupekey')&&j.shown(q);});k(p,true);}};f.exports=l;},null);
__d('FeedLiveUpdateBar',['ArbiterMixin','Animation','BanzaiScuba','CurrentUser','DOM','DOMScroll','Ease','Event','Vector','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=300,s=false;function t(v){this.element=v;this.init();}function u(v){new j('feed_newstoriescard').addNormal('user_id',k.getID()).addNormal('event',v).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}Object.assign(t.prototype,h,{init:function(){if(!this.element)return;var v=l.find(this.element,"._2f6b");o.listen(v,'click',this._handleClick.bind(this));},_handleClick:function(event){if(s)u('click');this.hide();var v=new p(p.getScrollPosition().x,0,'document');m.scrollTo(v,r,false,false,0,(function(){m.scrollTo(v,0);this.inform('click');}).bind(this));event.kill();},setAtTop:function(){s=true;},hide:function(){s=false;new i(this.element).from('top',42).to('top',-50).ease(n.sineOut()).duration(250).hide().go();},show:function(){if(!this.element)return;new i(this.element).from('top',-50).to('top',42).ease(n.makePowerOut(3)).duration(400).show().go();if(s)u('render');}});f.exports=t;},null);
__d("XFeedSeeFirstStoryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/control\/see_first\/story\/",{});},null);
__d('SeeFirstStoryLogger',['AsyncRequest','XFeedSeeFirstStoryController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=function(){var k=i.getURIBuilder().getURI();new h(k).send();};f.exports={log:j};},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=1,y=9,z=10,aa={},ba=false,ca,da,ea,fa,ga=[];function ha(){ca&&ca.release();ca=null;ba=false;}function ia(){aa={};ga=[];}function ja(){if(i.hasClass(document.body,"_5vb_"))return z;return y;}function ka(){fa=fa||q.getViewportDimensions().y;da=q.getScrollPosition().y;ea=da+fa;if(x){da-=fa*x;ea+=fa*x;}for(var sa in aa){var ta=aa[sa];ta.position=q.getElementPosition(ta.element).y;if(!ta.hidden)ta.height=ta.element.offsetHeight;}}function la(){var sa=[];for(var ta in aa){var ua=aa[ta],va=ua.position,wa=va+ua.height<da,xa=va>ea;if(!ua.hidden&&(wa||xa)){ma(ua);}else if(!wa&&!xa){ua.pendingHide=false;if(ua.hidden){if(ua.dirty&&va<da){sa.push(ta);i.addClass(na(ua),"_49nu");}else o.apply(ua.element,{height:'',marginBottom:''});i.show(na(ua));ua.dirty=false;ua.hidden=false;}}}if(!sa.length)return;var ya=0;u(function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];ya+=bb.height-na(bb).offsetHeight+o.getFloat(bb.element,'marginBottom');}},function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];i.removeClass(na(bb),"_49nu");o.apply(bb.element,{height:'',marginBottom:''});}ya&&n.setTop(document.body,n.getTop(document.body)-ya);});}function ma(sa){if(!sa.pendingHide){ga.push(sa);sa.pendingHide=true;}}function na(sa){if(sa.wrapperElement)return sa.wrapperElement;var ta=sa.element;if(ta.firstElementChild)return sa.wrapperElement=ta.firstElementChild;for(var ua=0;ua<ta.childNodes.length;ua++)if(ta.childNodes[ua].tagName)return sa.wrapperElement=ta.childNodes[ua];}function oa(){var sa=ja()+'px';for(var ta=0;ta<ga.length;ta++){var ua=ga[ta];if(j.scry(ua.element,"._52fb").length)ua.pendingHide=false;if(ua&&ua.element&&ua.pendingHide&&!ua.hidden){o.apply(ua.element,{height:ua.height+'px',marginBottom:sa});i.hide(na(ua));ua.hidden=true;ua.pendingHide=false;}}ga=[];}function pa(){v(oa,'LitestandOffscreenController/hide');u(ka,la,'LitestandOffscreenController');}function qa(){m.onLeave(ha);ca=new p();ca.addSubscriptions(h.subscribe(l.NAVIGATION_BEGIN,ia),k.listen(window,'scroll',w(pa)),k.listen(window,'resize',w(function(){fa=null;pa();})));ba=true;}var ra={attachSubstream:function(sa){ba||qa();aa[t(sa)]={element:sa};}};f.exports=ra;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','CSS','Event','LitestandMessages','LitestandStream','LitestandStreamConfig','NavigationMessage','Run','Style','SubscriptionsHandler','UITinyViewportAction','ge','getScrollPosition','memoize','$','queryThenMutateDOM','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=1,ba,ca,da=500,ea=600,fa,ga;function ha(){ga&&clearTimeout(ga);ga=null;}function ia(){ga=setTimeout(function(){ga=null;ja();},da);}function ja(){var cb;y(function(){cb=n.canInsertNewerStories();},function(){if(cb){za();}else ia();},'LitestandNewStoryController/tryShowingStories');}var ka=0,la=true,ma;function na(){if(!ma){ma=new s();ma.addSubscriptions(i.subscribe(p.NAVIGATION_BEGIN,wa),l.listen(window,'resize',oa),l.listen(window,'scroll',ta));q.onLeave(wa);}}function oa(){if(!qa())wa();}var pa=w(function(){var cb=u('blueBarNAXAnchor');return cb&&k.hasClass(cb,'fixed_elem');});function qa(){return pa()&&!t.isTiny();}function ra(cb,db){var eb=u(cb);if(eb)eb.style.marginTop=db?db+'px':'';}function sa(cb){if(!qa()){cb=0;}else cb=Math.max(cb,0);ka=cb;ra('leftCol',cb);ra('rightCol',cb);}function ta(){var cb=v(window).y;if(cb<=0){wa();return;}if(cb<ka){la=false;sa(cb);}if(ca&&cb>ca+50&&ba){ba.hide();ca=null;}ca=cb;}function ua(cb){if(!la)va(cb);}function va(cb){cb.animation.stop();r.set(cb.stories,'opacity',1);}function wa(){if(ma){ma&&ma.release();la=false;sa(0);ma=null;if(ba){ba.hide();ca=null;}}}function xa(cb,db){var eb=new h(cb).from('opacity',0).to('opacity',1).duration(ea),fb={animation:eb,stories:cb},gb=ea;if(db){la=true;var hb=ua.bind(null,fb);for(var ib=0;ib<aa;ib++){eb.checkpoint(1,hb).from('opacity',1).to('opacity',0).duration(ea).checkpoint().from('opacity',0).to('opacity',1).duration(ea);gb+=2*ea;}}eb.go();setTimeout(va.bind(null,fb),gb+200);}function ya(cb){ha();if(!fa)return;if(cb)var db=v(window),eb=fa.nextSibling,fb=eb.offsetTop,gb=function(){sa(db.y+eb.offsetTop-fb);window.scrollTo(db.x,ka);};r.apply(fa,{height:'',left:'',overflow:'',position:'',width:''});if(cb){gb();var hb=fa;z(function(){na();gb();xa(hb,!o.fade_in);if(ba){ba.setAtTop();ba.show();}});}else xa(fa,false);i.inform(m.STORIES_INSERTED);i.inform(m.NEWER_STORIES_INSERTED);setTimeout(function(){i.inform('reflow');},0);new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:n.getSectionID()}).send();fa=null;}function za(){ya(qa());}function ab(){ya(false);}var bb={waitForDisplay:function(cb){if(!fa)fa=x(cb);if(n.canInsertNewerStories()){za();}else ia();},showStoriesNow:function(cb){fa=cb;ab();},setNewStoryPill:function(cb){ba=cb;}};f.exports=bb;},null);
__d('LitestandStreamLoader',['Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','LitestandStreamConfig','NavigationMessage','OnVisible','ReloadPage','Run','URI','UserActivity','$','ge','getElementPosition','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa=0,ga=false,ha={},ia,ja,ka,la,ma,na,oa=0,pa,qa,ra=[],sa=60000,ta=30,ua=200,va=0,wa,xa;function ya(){w.onLeave(za);fa=0;ra=[h.subscribe(t.NAVIGATION_BEGIN,za),h.subscribe(o.NEWER_STORIES_INSERTED,function(){xa=null;})];ra.push(h.subscribe('layer_shown',function(pb,qb){if(qb&&qb.type==='DialogX')fa++;}),h.subscribe('layer_hidden',function(pb,qb){if(qb&&qb.type==='DialogX')fa--;}));q.registerBlocker(function(){return fa>0;});ga=true;}function za(){h.inform(o.LEAVE_HOME);ha={};qa=null;oa=0;ra.forEach(h.unsubscribe);ra=[];ia&&ia.remove();ma&&clearTimeout(ma);ma=null;la=null;xa=null;pa&&pa.remove();pa=null;ga=false;va=0;}function ab(pb){ma&&clearTimeout(ma);ma=setTimeout(function(){ma=null;gb();},pb);}function bb(){if(qa&&la&&qa.pollIntervalMS&&qa.pollIntervalMS>1000){y.setIdleTime(qa.newStoryIdleTime);ab(qa.pollIntervalMS);}}function cb(){ia=new u(k.find(ja,'a'),nb.bind(null),false,qa.bufferPixels);}function db(){var pb=ca(window).y;return pb>qa.firstPagerScrollBuffer;}function eb(){if(db()){cb();pa&&pa.remove();pa=null;}}function fb(pb){var qb=k.find(ja,'a');m.listen(qb,'click',function(event){nb();pa&&pa.remove();pa=null;event.preventDefault();});var rb=ba(ja),sb=da();if(pb&&rb.y<sb.height){nb();}else if(pb&&!db()){pa=m.listen(window,'scroll',ea(eb));}else cb();}function gb(){if(!la)return;if(!y.isActive(qa.newStoryIdleTime)){y.subscribeOnce(gb);return;}if(y.hasBeenInactive()){y.resetActiveStatus();var pb=qa.pollIntervalMS,qb=Date.now()-y.getLastInActiveEnds();if(qb<pb){ab(pb-qb);return;}}if(!r.canInsertNewerStories()){ab(qa.pollIntervalMS);return;}hb(false);}function hb(pb){if(!la)return;ma&&clearTimeout(ma);if(!xa){var qb=r.getStreamRoot();xa=n.div({style:{height:0,width:qb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});k.prependContent(qb,xa);h.inform(o.NEW_STORIES_CONTAINER_CREATED,xa);}var rb=n.div(null);k.prependContent(xa,rb);i.loadModules(["UIPagelet"],function(sb){sb.loadFromEndpoint('LitestandNewerStoriesPagelet',rb,Object.assign(la,{cursor:wa,containerID:k.getID(xa),fblogo:pb}),{crossPage:true});});}function ib(){var pb=k.getID(ja);j.addClass(ja,'async_saving');var qb=lb(),rb=qb.cursor,sb=qb.storiesCount;if(ha[rb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+rb);ha[rb]=rb;var tb={cursor:rb,pager_config:ka,pager_id:pb,scroll_count:++oa,feed_stream_id:r.getFeedStreamID(),client_stories_count:sb};i.loadModules(["UIPagelet"],function(ub){ub.loadFromEndpoint(qa.pagerController,k.getID(na),tb,{append:true,automatic:true,usePipe:true,crossPage:qa.crossPage,errorHandler:jb,transportErrorHandler:jb});});}function jb(pb){var qb=lb();delete ha[qb.cursor];j.removeClass(ja,'async_saving');}function kb(){var pb=mb();if(pb.length){return pb[0].getAttribute('data-cursor');}else return ja&&ja.getAttribute('data-cursor');}function lb(){var pb=mb(),qb={};if(pb.length){qb.cursor=pb[pb.length-1].getAttribute('data-cursor');qb.storiesCount=pb.length;}else{qb.cursor=ja&&ja.getAttribute('data-cursor');qb.storiesCount=0;}return qb;}function mb(){var pb=k.scry(na,r.getStoriesSelector());return pb.filter(function(qb){return qb.getAttribute('data-cursor');});}function nb(){ib();ia&&ia.remove();ia=null;}var ob={register:function(pb,qb,rb,sb){ga||ya();qa=babelHelpers._extends({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},qb);ka=rb;na=z(pb);wa=kb();ja=sb;fb(true);bb();},removeOldPager:function(pb,qb){if(pb)k.remove(z(pb));j.show(z(qb));},removeLoadingIndicator:function(pb,qb){var rb=aa(pb);if(rb)k.remove(rb);j.show(qb);},moreStoriesInserted:function(pb){h.inform(o.STORIES_INSERTED,{substream_id:pb});var qb=z(pb);if(s.hide_offscreen_substreams)p.attachSubstream(qb);},attachNewPager:function(pb){l.dedupeHide(r.getStreamRoot(),r.getStoriesSelector());ja=pb;ja&&fb(false);},setPollerData:function(pb){if(pb){la=pb;bb();}},headLoadCompleted:function(pb){wa=pb.newCursor;bb();var qb=pb.stories;if(qb&&qb.length>0){for(var rb=qb.length-1;rb>=0;rb--)qb[rb].setAttribute('data-insertion-position',--va);var sb=r.getStoriesSelector();l.dedupe(r.getStreamRoot(),sb);var tb=k.scry(xa,sb);h.inform('Stream/totalHeadLoadedStories',{count:-va,hiddenCount:tb.length,fblogo:pb.fblogo});}},forceNewFetch:function(){hb(true);}};f.exports=ob;},null);
__d('PhotosUploadWaterfallMixin',['Flash','PhotosUploadWaterfall','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){i.sendSignal(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:h.getVersionString(),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){i.sendBanzai(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};f.exports=l;},null);
__d('PhotoSourceTypes',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null});},null);
__d('BaseSelectionContainer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0;function i(){'use strict';this.$BaseSelectionContainer1=(h++).toString();}i.prototype.getSelectionContainerID=function(){'use strict';return this.$BaseSelectionContainer1;};i.prototype.getSource=function(){'use strict';throw 'This must be implemented by the child class';};i.prototype.getName=function(){'use strict';return null;};i.prototype.getSize=function(){'use strict';return null;};i.prototype.hasPlaceholderUI=function(){'use strict';throw 'This must be implemented by the child class';};f.exports=i;},null);
__d('SelectionSource',['PhotoSourceTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',POSTED_PHOTOS:'posted_photos',PAGES_POSTED_PHOTOS:'pages_posted_photos',toPhotoSourceType:function(j){switch(j){case i.FILE:case i.FLASH:return h.COMPUTER;case i.VAULT:return h.SYNCED_PHOTOS;case i.SUGGESTIONS:return h.SUGGESTIONS;case i.POSTED_PHOTOS:return h.POSTED_PHOTOS;case i.PAGES_POSTED_PHOTOS:return h.PAGES_POSTED_PHOTOS;default:throw 'No mapping for SelectionSource: '+j;}}};f.exports=i;},null);
__d('FileSelectionContainer',['BaseSelectionContainer','SelectionSource'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this);this.$FileSelectionContainer1=m;}l.prototype.getFile=function(){'use strict';return this.$FileSelectionContainer1;};l.prototype.getSource=function(){'use strict';return i.FILE;};l.prototype.getName=function(){'use strict';return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name;};l.prototype.getSize=function(){'use strict';return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size;};l.prototype.hasPlaceholderUI=function(){'use strict';return false;};f.exports=l;},null);
__d('FilePickerEvent',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d('HTML5FilePicker',['ArbiterMixin','BrowserSupport','CSS','DOM','FilePickerEvent','FileSelectionContainer','Parent','PhotosUploadID','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosUploadWaterfallXMixin','PUWApplications','URI','PUWSteps','createArrayFromMixed','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();function x(y,z){this._config=babelHelpers._extends({accept:undefined,multiple:undefined},z);this._button=y;this._beginInformed=false;if(!i.hasFileAPI()){this.logStep(u.CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}var aa=new t(this._button.getAttribute('ajaxify'));this._button.setAttribute('ajaxify',aa.addQueryData({app:p.APP_FLASH}).toString());this.logWaterfallStep(p.FALLBACK_TO_FLASH);return;}this._subscriptions=[];var ba=this._config.input||k.create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))ba.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))ba.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))ba.title=this._config.title;var ca=k.create('label',{className:'accessible_elem','for':k.getID(ba)},ba.title),da=k.create('div',{className:"_3jk"},[ca,ba]);j.addClass(this._button,"_m");k.appendContent(this._button,da);this._button.setAttribute('rel','ignore');this._bindInput(ba);var ea=n.byClass(this._button,'addPhotosDisabled');if(ea){j.removeClass(ea,'addPhotosDisabled');j.addClass(ea,'addPhotosEnabled');}}Object.assign(x.prototype,h,q,r,{getUploaderApp:function(){return p.APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return s.WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},getSwfID:function(){return null;},_constructFileList:function(){var y=v(this._input.files);y.forEach(function(z){z.uploadID=o.getNewID();});return y;},_constructFileSelectionContainerList:function(){var y=v(this._input.files);return y.map(function(z){return new m(z);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(y){this.cleanup();y.onclick=(function(){this.logWaterfallStep(p.SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(l.BEGIN||'FilePickerEvent/BEGIN');}this.inform(l.SELECT_START);}).bind(this);y.onchange=(function(){this.inform(l.SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}).bind(this);if(this._input)k.replace(this._input,y);this._input=y;}});f.exports=x;},null);
__d('UploadSession',['AsyncRequest','FilePickerEvent','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={};function o(q){'use strict';this._sessionID=q;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}o.prototype.addFilePicker=function(q){'use strict';if(!m(this._pickers,q)){this._pickers.push(q);if(this._controller&&q.getSwfID&&q.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(q.getSwfID());q.subscribe(i.BEGIN,(function(r,s){if(!this._beginLogged){this._beginLogged=true;q.logWaterfallStep(j.BEGIN);q.logStep(k.CLIENT_FLOW_BEGIN);}}).bind(this));q.subscribe(i.SELECTED,(function(r,s){q.logStep(k.CLIENT_SELECT_SUCCESS,{volume:s.files.length});if(this._controller){this._controller.uploadFiles(s.files);}else this._pendingFileLists.push(s);if(this._asyncBootstrapped)return;var t=q._button,u=new l(t.getAttribute('ajaxify'));u.addQueryData('num_selected',s.files.length);h.bootstrap(u.toString(),t,true);this._asyncBootstrapped=true;}).bind(this));q.subscribe(i.SELECT_START,(function(){q.logStep(k.CLIENT_SELECT_BEGIN);}).bind(this));q.subscribe(i.SELECT_CANCELED,(function(){q.logStep(k.CLIENT_SELECT_CANCEL);if(!this._overlay){q.logStep(k.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}).bind(this));q.subscribe(i.ALBUM_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}).bind(this));q.subscribe(i.SESSION_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}).bind(this));}};o.prototype.addController=function(q){'use strict';this._controller=q;this._asyncBootstrapped=true;var r=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,s=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;j.sendSignal({qn:r,step:j.BEGIN,uploader:s});}if(this._pendingFileLists.length){var t=[];this._pendingFileLists.forEach(function(u){t=t.concat(u.files);});this._controller.uploadFiles(t);}else j.sendSignal({qn:r,step:j.OVERLAY_FIRST,uploader:s});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};o.prototype.addOverlay=function(q){'use strict';this._overlay=q;};o.prototype.addOverlayAndController=function(q,r){'use strict';this.addOverlay(q);this.addController(r);};o.addFilePickerToSession=function(q,r){'use strict';p(q).addFilePicker(r);};o.addControllerToSession=function(q,r){'use strict';p(q).addController(r);};o.addOverlayToSession=function(q,r){'use strict';p(q).addOverlay(r);};o.addOverlayAndControllerToSession=function(q,r,s){'use strict';p(q).addOverlayAndController(r,s);};function p(q){if(!n[q])n[q]=new o(q);return n[q];}f.exports=o;},null);
__d('PubcontentFeedChainingControllerLoader',['Arbiter','Bootloader','PageLikeConstants','SubscriptionsHandler','UFIUIEvents','AttachmentRelatedShareConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=[j.LIKED,l.ActionLinkLike,l.ReactionButtonClicked,l.ActionAddComment,'composer/publish','LitestandComposer/publish',m.ARTICLE_CLICK,m.VIDEO_CLICK,m.FBVIDEO_CLICK,m.GAME_CLICK,m.PHOTO_CLICK,m.EVENT_JOIN],o=null,p=false,q=null,r={init:function(){if(q){q.init({isLazy:false});}else this._startListening();},_startListening:function(){if(o)return;o=new k();o.addSubscriptions(h.subscribe(n,(function(event,s){h.inform(event+'.lazy',s,h.BEHAVIOR_PERSISTENT);this._bootload();}).bind(this)));},_bootload:function(){if(p)return;p=true;i.loadModules(["PubcontentFeedChainingControllerX"],function(s){o&&o.release();q=s;q.init({isLazy:true});});}};f.exports=r;},null);
__d('ReactFeedComposerXBody',['DOM','Event','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerXBody1=l.root;this.$ReactFeedComposerXBody2=h.find(this.$ReactFeedComposerXBody1,'textarea');this.$ReactFeedComposerXBody3=h.find(this.$ReactFeedComposerXBody1,'input[type="hidden"]');this.$ReactFeedComposerXBody4=new j();this.$ReactFeedComposerXBody4.addSubscriptions(i.listen(this.$ReactFeedComposerXBody2,'change',this.$ReactFeedComposerXBody5.bind(this)));}k.prototype.$ReactFeedComposerXBody5=function(l){this.$ReactFeedComposerXBody3.value=l.target.value;};f.exports=k;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=m(ca.containerID);if(!ea)return;z=babelHelpers._extends({},ca.demoAdChecks,z);var fa=l.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(n(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(i.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=l.scry(ca,"div._hye"),fa=l.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=l.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=w.length-ca)return -1;for(var ea=ca+1;ea<w.length&&da>0;ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logAdsGapEvent(na);x[ha.dedupKey]=na;}if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:oa-ga,qid:w[oa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;h.post('feed_ads_gap_rule_violation',da);},_logAdsGapEvent:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};h.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};h.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){i.hide(m(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=m(ca.nodeid);da&&i.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=m(ca),fa=m(da);ea&&fa&&l.insertAfter(fa,ea);}};f.exports=ba;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);
__d('FbFeedViewportTracking',['Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;o.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(h.subscribe([i.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),h.subscribe(i.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};o.prototype.getStorySelector=function(){'use strict';return "._5jmm";};o.prototype.getStream=function(){'use strict';return j.getStreamRoot();};o.prototype.getSessionID=function(){'use strict';return j.getFeedStreamID();};o.init=function(p){'use strict';o.instance=new o();o.instance.init(p);};o.getInstance=function(){'use strict';return o.instance;};function o(){'use strict';m.apply(this,arguments);}f.exports=o;},null);