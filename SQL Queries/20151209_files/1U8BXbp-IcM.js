/*!CK:1068518602!*//*1449269112,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5co94"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(dk,ek){var fk=dk.split("."),gk=k;fk[0] in gk||!gk.execScript||gk.execScript("var "+fk[0]);for(var hk;fk.length&&(hk=fk.shift());)fk.length||void 0===ek?gk[hk]?gk=gk[hk]:gk=gk[hk]={}:gk[hk]=ek;}function m(dk,ek){function fk(){}fk.prototype=ek.prototype;dk.mb=ek.prototype;dk.prototype=new fk();dk.prototype.constructor=dk;dk.ib=function(gk,hk,ik){return ek.prototype[hk].apply(gk,Array.prototype.slice.call(arguments,2));};}function n(dk,ek,fk){this.id=dk;this.bandwidth=ek||0;this.lang=fk||"unknown";this.active=false;}l("shaka.player.AudioTrack.compare",function(dk,ek){return dk.lang<ek.lang?-1:dk.lang>ek.lang?1:dk.bandwidth<ek.bandwidth?-1:dk.bandwidth>ek.bandwidth?1:0;});function o(dk,ek){this.id=dk;this.lang=ek||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(dk,ek){return dk.lang<ek.lang?-1:dk.lang>ek.lang?1:0;});function p(dk,ek,fk,gk){this.id=dk;this.bandwidth=ek||0;this.width=fk||0;this.height=gk||0;this.active=false;}function q(dk,ek){var fk=dk.width*dk.height,gk=ek.width*ek.height;return fk<gk?-1:fk>gk?1:dk.bandwidth<ek.bandwidth?-1:dk.bandwidth>ek.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",q);function r(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null;}r.prototype.clone=function(){var dk=new r();dk.maxHeight=this.maxHeight;dk.maxWidth=this.maxWidth;dk.maxBandwidth=this.maxBandwidth;dk.minBandwidth=this.minBandwidth;return dk;};function s(){var dk=Element.prototype;dk.requestFullscreen=dk.requestFullscreen||dk.mozRequestFullScreen||dk.msRequestFullscreen||dk.webkitRequestFullscreen;dk=Document.prototype;dk.exitFullscreen=dk.exitFullscreen||dk.mozCancelFullScreen||dk.msExitFullscreen||dk.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",t);document.addEventListener("webkitfullscreenerror",t);document.addEventListener("mozfullscreenchange",t);document.addEventListener("mozfullscreenerror",t);document.addEventListener("MSFullscreenChange",t);document.addEventListener("MSFullscreenError",t);}l("shaka.polyfill.Fullscreen.install",s);function t(dk){var ek=dk.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),ek=new Event(ek,dk);dk.target.dispatchEvent(ek);}function u(){var dk=HTMLVideoElement.prototype;!dk.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in dk&&(dk.getVideoPlaybackQuality=v);}l("shaka.polyfill.VideoPlaybackQuality.install",u);function v(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function w(){var dk="CustomEvent" in i;if(dk)try{new CustomEvent("");}catch(ek){dk=false;}dk||(i.CustomEvent=x);}l("shaka.polyfill.CustomEvent.install",w);function x(dk,ek){var fk=document.createEvent("CustomEvent"),gk=ek||{bubbles:false,cancelable:false,detail:null};fk.initCustomEvent(dk,!!gk.bubbles,!!gk.cancelable,gk.detail);return fk;}function y(dk){var ek=console[dk];ek?ek.bind||(console[dk]=function(){ek.apply(console,arguments);}):console[dk]=function(){};}y("error");y("warn");y("info");y("log");y("debug");function z(){}function aa(){this.fontSize="100%";this.fontColor=da;this.fontOpacity=fa;this.backgroundColor=ea;this.backgroundOpacity=fa;this.fontEdge=ga;}l("shaka.player.TextStyle",aa);aa.prototype.a=function(){var dk=i.localStorage.getItem("ShakaPlayerTextStyle");if(dk){var ek;try{ek=JSON.parse(dk);}catch(fk){return;}if(ek&&"object"==typeof ek){var dk=ek,gk;for(gk in dk)gk in this&&(this[gk]=dk[gk]);}}};aa.prototype.load=aa.prototype.a;aa.prototype.b=function(){i.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this));};aa.prototype.store=aa.prototype.b;function ba(dk){var ek=[];ek.push("font-size: "+dk.fontSize);ek.push("color: "+ca(dk.fontColor,dk.fontOpacity));ek.push("background-color: "+ca(dk.backgroundColor,dk.backgroundOpacity));for(var fk=[],gk=0;gk<dk.fontEdge.length;++gk){var hk=dk.fontEdge[gk].slice(3,6);fk.push(ca(dk.fontEdge[gk].slice(0,3),dk.fontOpacity)+" "+hk.join("px ")+"px");}ek.push("text-shadow: "+fk.join(","));return ek.join("; ");}function ca(dk,ek){return "rgba("+dk.concat(ek).join(",")+")";}var da=[255,255,255],ea=[0,0,0];aa.StandardColors={WHITE:da,BLACK:ea,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var fa=1;aa.StandardOpacities={OPAQUE:fa,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ga=[];aa.EdgeStyles={NONE:ga,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ha(){return Promise.reject(Error("The key system specified is not supported."));}function ia(dk){return null==dk?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ja(){throw new TypeError("Illegal constructor.");}ja.prototype.createSession=function(){};ja.prototype.setServerCertificate=function(){};function ka(){throw new TypeError("Illegal constructor.");}ka.prototype.getConfiguration=function(){};ka.prototype.createMediaKeys=function(){};function la(dk){pa[dk]={Z:oa(),end:NaN};}function ma(dk){if(dk=pa[dk])dk.end=oa();}function na(dk){return (dk=pa[dk])&&dk.end?dk.end-dk.Z:NaN;}var oa=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,pa={};function qa(dk){var ek=new CustomEvent(dk.type,{detail:dk.detail,bubbles:!!dk.bubbles}),fk;for(fk in dk)fk in ek||(ek[fk]=dk[fk]);return ek;}function ra(dk){return new CustomEvent("error",{detail:dk,bubbles:true});}function sa(dk){this.c=Math.exp(Math.log(.5)/dk);this.a=this.b=0;}sa.prototype.sample=function(dk,ek){var fk=Math.pow(this.c,dk);this.b=ek*(1-fk)+fk*this.b;this.a+=dk;};function ta(dk){return dk.b/(1-Math.pow(dk.c,dk.a));}function ua(dk){this.b=dk;this.a=new tb(dk);va||(va=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var va;function wa(dk){var ek;ek=xa(dk);if(7<ek.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var fk=0,gk=0;gk<ek.length;gk++)fk=256*fk+ek[gk];ek=fk;fk=xa(dk);dk:{for(gk=0;gk<va.length;gk++)if(nb(fk,va[gk])){gk=true;break dk;}gk=false;};if(gk)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==fk.length&&fk[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var gk=fk[0]&(1<<8-fk.length)-1,hk=1;hk<fk.length;hk++)gk=256*gk+fk[hk];fk=gk;fk=dk.a.a+fk<=dk.b.byteLength?fk:dk.b.byteLength-dk.a.a;gk=new DataView(dk.b.buffer,dk.b.byteOffset+dk.a.a,fk);bc(dk.a,fk);return new ya(ek,gk);}function xa(dk){var ek=xb(dk.a),fk;for(fk=1;8>=fk&&!(ek&1<<8-fk);fk++);if(8<fk)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var gk=new Uint8Array(fk);gk[0]=ek;for(ek=1;ek<fk;ek++)gk[ek]=xb(dk.a);return gk;}function ya(dk,ek){this.id=dk;this.a=ek;}function za(dk){if(8<dk.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==dk.a.byteLength&&dk.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var ek=0,fk=0;fk<dk.a.byteLength;fk++)var gk=dk.a.getUint8(fk),ek=256*ek+gk;return ek;}function ab(dk,ek){return ek.bind(dk);}function bb(dk,ek){for(var fk={},gk=0;gk<dk.length;++gk){var hk=ek?ek(dk[gk]):dk[gk].toString();fk[hk]=dk[gk];}var gk=[],ik;for(ik in fk)gk.push(fk[ik]);return gk;}function cb(dk,ek,fk){fb(ek);fb(fk);return fk==ek||dk>=db&&fk==ek.split("-")[0]||dk>=eb&&fk.split("-")[0]==ek.split("-")[0]?true:false;}var db=1,eb=2;function fb(dk){dk=dk.toLowerCase().split("-");var ek=gb[dk[0]];ek&&(dk[0]=ek);return dk.join("-");}var gb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"},hb=0;function ib(dk){dk.split("").reduce(function(ek,fk,gk){return ek+(gk&&0==gk%4?" "+fk:fk);});}function jb(dk){return String.fromCharCode.apply(null,dk);}l("shaka.util.Uint8ArrayUtils.toString",jb);function kb(dk){for(var ek=new Uint8Array(dk.length),fk=0;fk<dk.length;++fk)ek[fk]=dk.charCodeAt(fk);return ek;}l("shaka.util.Uint8ArrayUtils.fromString",kb);l("shaka.util.Uint8ArrayUtils.toBase64",function(dk,ek){var fk=void 0==ek?true:ek,gk=i.btoa(jb(dk)).replace(/\+/g,"-").replace(/\//g,"_");return fk?gk:gk.replace(/=*$/,"");});function lb(dk){return kb(i.atob(dk.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",lb);l("shaka.util.Uint8ArrayUtils.fromHex",function(dk){for(var ek=new Uint8Array(dk.length/2),fk=0;fk<dk.length;fk+=2)ek[fk/2]=i.parseInt(dk.substr(fk,2),16);return ek;});function mb(dk){for(var ek="",fk=0;fk<dk.length;++fk){var gk=dk[fk].toString(16);1==gk.length&&(gk="0"+gk);ek+=gk;}return ek;}l("shaka.util.Uint8ArrayUtils.toHex",mb);function nb(dk,ek){if(!dk&&!ek)return true;if(!dk||!ek||dk.length!=ek.length)return false;for(var fk=0;fk<dk.length;++fk)if(dk[fk]!=ek[fk])return false;return true;}function ob(){this.j=this.a="";this.o=false;this.g=this.f=null;this.l=this.i=false;this.s=this.h="";this.c=null;this.b=[];}function pb(dk,ek){var fk=dk.b.concat(ek.map(function(gk){return {initData:new Uint8Array(gk.initData.buffer),initDataType:gk.initDataType};}));dk.b=bb(fk,function(gk){return Array.prototype.join.apply(gk.initData)+","+gk.initDataType;});}function qb(dk,ek,fk,gk,hk,ik,jk,kk,lk,mk,nk){this.g=dk;this.j=ek;this.o=fk;this.a=[];this.h=hk||null;this.i=ik||null;this.f=jk==rb;this.l=kk==sb;this.c=lk||"";this.s=mk||"";this.b=nk||null;gk&&this.a.push(gk);}l("shaka.player.DrmSchemeInfo",qb);var rb=1;qb.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:rb};var sb=1;qb.PersistentState={OPTIONAL:0,REQUIRED:sb};qb.createUnencrypted=function(){return new qb("","",false,null);};function tb(dk){var ek=ub;this.b=dk;this.c=ek==vb;this.a=0;}var ub=0,vb=1;function wb(dk){return dk.a<dk.b.byteLength;}function xb(dk){var ek=dk.b.getUint8(dk.a);dk.a+=1;return ek;}function yb(dk){var ek=dk.b.getUint32(dk.a,dk.c);dk.a+=4;return ek;}function zb(dk){var ek,fk;dk.c?(ek=dk.b.getUint32(dk.a,true),fk=dk.b.getUint32(dk.a+4,true)):(fk=dk.b.getUint32(dk.a,false),ek=dk.b.getUint32(dk.a+4,false));if(2097151<fk)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");dk.a+=8;return fk*Math.pow(2,32)+ek;}function ac(dk){if(dk.a+16>dk.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var ek=new Uint8Array(dk.b.buffer,dk.a,16);dk.a+=16;return ek;}function bc(dk,ek){if(dk.a+ek>dk.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");dk.a+=ek;}function cc(dk){this.systemIds=[];this.cencKeyIds=[];dk=new tb(new DataView(dk.buffer));try{for(;wb(dk);){var fk=dk.a,gk=yb(dk),hk=yb(dk);1==gk?gk=zb(dk):0==gk&&(gk=dk.b.byteLength-fk);if(1886614376!=hk){bc(dk,gk-(dk.a-fk));}else{var ik=xb(dk);if(1<ik){bc(dk,gk-(dk.a-fk));}else{bc(dk,3);var jk=mb(ac(dk)),kk=[];if(0<ik)for(var lk=yb(dk),mk=0;mk<lk;++mk){var nk=mb(ac(dk));kk.push(nk);}var ok=yb(dk);bc(dk,ok);this.cencKeyIds.push.apply(this.cencKeyIds,kk);this.systemIds.push(jk);dk.a!=fk+gk&&bc(dk,gk-(dk.a-fk));}}}}catch(ek){}}var dc={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function ec(){var dk,ek,fk=new Promise(function(gk,hk){dk=gk;ek=hk;});fk.resolve=dk;fk.reject=ek;fk.destroy=ec.prototype.destroy;return fk;}ec.prototype.destroy=function(){this.catch(function(){});var dk=Error("Destroyed!");dk.type="destroy";this.reject(dk);};function fc(){this.g=new ec();this.f=false;this.a=null;this.b=[];this.c=null;}function gc(dk,ek){if(dk.f)throw Error("Cannot append to a running task!");dk.b.push(ek);}fc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});hc(this,void 0);};fc.prototype.end=function(){this.b.splice(1);};function hc(dk,ek){var fk=dk.b[0](ek),gk;fk?(gk=fk[0],dk.c=fk[1]):(gk=Promise.resolve(),dk.c=null);gk.then(ab(dk,function(hk){this.a?(this.b=[],this.c=null,ic(this)):(this.b.shift(),this.b.length?hc(this,hk):(this.g.resolve(hk),this.c=null));})).catch(ab(dk,function(hk){this.b=[];this.c=null;this.a?ic(this):this.g.reject(hk);}));}function ic(dk){var ek=Error("Task aborted.");ek.type="aborted";dk.g.reject(ek);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(dk),5);}function jc(){this.a={};}jc.prototype.push=function(dk,ek){this.a.hasOwnProperty(dk)?this.a[dk].push(ek):this.a[dk]=[ek];};jc.prototype.get=function(dk){return (dk=this.a[dk])?dk.slice():null;};function kc(dk){var ek=[],fk;for(fk in dk.a)ek.push.apply(ek,dk.a[fk]);return ek;}function lc(dk,ek,fk){if(dk=dk.a[ek])for(ek=0;ek<dk.length;++ek)dk[ek]==fk&&(dk.splice(ek,1),--ek);}function mc(dk){var ek=[],fk;for(fk in dk.a)ek.push(fk);return ek;}function nc(){this.a=new jc();}nc.prototype.destroy=function(){pc(this);this.a=null;};function oc(dk,ek,fk,gk){ek=new qc(ek,fk,gk);dk.a.push(fk,ek);}nc.prototype.$=function(dk,ek){for(var fk=this.a.get(ek)||[],gk=0;gk<fk.length;++gk){var hk=fk[gk];hk.target==dk&&(hk.$(),lc(this.a,ek,hk));}};function pc(dk){for(var ek=kc(dk.a),fk=0;fk<ek.length;++fk)ek[fk].$();dk.a.a={};}function qc(dk,ek,fk){this.target=dk;this.type=ek;this.a=fk;this.target.addEventListener(ek,fk,false);}qc.prototype.$=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function rc(dk,ek,fk){MediaSource.isTypeSupported(ek);ek=dk.addSourceBuffer(ek);this.j=dk;this.c=ek;this.l=fk;this.h=new nc();this.b=[];this.o=0;this.f=this.a=null;this.s=0;oc(this.h,this.c,"updateend",this.u.bind(this));}var sc=1/60;rc.prototype.destroy=function(){xc(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.h.destroy();this.j=this.c=this.h=null;};function tc(dk,ek){for(var fk=dk.c.buffered,gk=0;gk<fk.length;++gk){var hk=fk.start(gk)-sc,ik=fk.end(gk)+sc;if(ek>=hk&&ek<=ik)return fk.end(gk)-ek;}return 0;}function uc(dk,ek,fk,gk){if(dk.a)return dk=Error("Cannot fetch ("+dk.i+"): previous operation not complete."),dk.type="stream",Promise.reject(dk);dk.a=new fc();fk!=dk.c.timestampOffset&&(dk.c.timestampOffset=fk);fk=ek.a?ek.a-ek.b:1;var hk=new bg();hk.a=3;hk.g=1000*fk;hk.c=1000*dk.s;var ik=ig(ek.url,hk,dk.l),jk=gg.prototype.f.bind(ek.url);gk&&gc(dk.a,function(){return [gk.then(function(mk){return zc(this,mk);}.bind(this)),this.g.bind(this)];}.bind(dk));gc(dk.a,ab(dk,function(){return [ik.then(function(mk){this.l.getBandwidth();return zc(this,mk);}.bind(this)),function(){jk();this.g();}.bind(this)];}));var kk=0==dk.c.buffered.length&&0==dk.b.length,lk=null;gc(dk.a,function(){if(0==this.c.buffered.length){var mk=Error("Failed to buffer segment ("+this.i+").");mk.type="stream";return [Promise.reject(mk)];}kk&&(mk=ek.b,lk=this.c.buffered.start(0)-mk);mk=qg(this.b,ek.b);0<=mk?this.b.splice(mk+1,0,ek):this.b.push(ek);}.bind(dk));return yc(dk).then(function(){return Promise.resolve(lk);}.bind(dk));}function vc(dk){if(dk.a)return dk=Error("Cannot clear ("+dk.i+"): previous operation not complete."),dk.type="stream",Promise.reject(dk);dk.a=new fc();gc(dk.a,function(){var ek;ek:if(0==this.c.buffered.length){ek=Promise.resolve();}else{try{this.c.remove(0,Number.POSITIVE_INFINITY);}catch(fk){ek=Promise.reject(fk);break ek;}this.b=[];ek=this.f=new ec();};return [ek,this.g.bind(this)];}.bind(dk));return yc(dk);}function wc(dk,ek){if(dk.a){var fk=Error("Cannot clearAfter ("+dk.i+"): previous operation not complete.");fk.type="stream";return Promise.reject(fk);}dk.a=new fc();gc(dk.a,function(){return [ad(this,ek),this.g.bind(this)];}.bind(dk));return yc(dk);}function xc(dk){dk.a?(dk=dk.a,dk.a?dk=dk.a:dk.f?(dk.c&&dk.c(),dk.a=new ec(),dk=dk.a):(dk.f=true,dk=Promise.resolve())):dk=Promise.resolve();return dk;}function yc(dk){dk.a.start();return dk.a.g.then(ab(dk,function(){this.a=null;})).catch(ab(dk,function(ek){this.a=null;return Promise.reject(ek);}));}function zc(dk,ek){try{dk.c.appendBuffer(ek);}catch(fk){return Promise.reject(fk);}dk.f=new ec();return dk.f;}function ad(dk,ek){if(0==dk.c.buffered.length)return Promise.resolve();var fk=qg(dk.b,ek);if(-1==fk||fk==dk.b.length-1)return Promise.resolve();try{dk.c.remove(dk.b[fk+1].b,Number.POSITIVE_INFINITY);}catch(gk){return Promise.reject(gk);}dk.b=dk.b.slice(0,fk+1);dk.f=new ec();return dk.f;}rc.prototype.g=function(){"open"==this.j.readyState&&this.c.abort();};rc.prototype.u=function(){this.f.resolve();this.f=null;};function bd(dk){this.oa=new jc();this.s=dk;}l("shaka.util.FakeEventTarget",bd);bd.prototype.addEventListener=function(dk,ek,fk){fk||this.oa.push(dk,ek);};bd.prototype.removeEventListener=function(dk,ek,fk){fk||lc(this.oa,dk,ek);};bd.prototype.dispatchEvent=function(dk){delete dk.srcElement;delete dk.target;delete dk.currentTarget;Object.defineProperties(dk,{srcElement:{value:null,writable:true},target:{value:this,writable:true},currentTarget:{value:null,writable:true}});return cd(this,dk);};function cd(dk,ek){ek.currentTarget=dk;for(var fk=dk.oa.get(ek.type)||[],gk=0;gk<fk.length;++gk){var hk=fk[gk];try{hk.handleEvent?hk.handleEvent(ek):hk.call(dk,ek);}catch(ik){}}dk.s&&ek.bubbles&&cd(dk.s,ek);return ek.defaultPrevented;}function dd(dk,ek){try{var gk=new fd(dk,ek);return Promise.resolve(gk);}catch(fk){return Promise.reject(fk);}}function ed(dk){var ek=this.mediaKeys;ek&&ek!=dk&&hd(ek,null);delete this.mediaKeys;(this.mediaKeys=dk)&&hd(dk,this);return Promise.resolve();}function fd(dk,ek){this.a=this.keySystem=dk;var fk=true;"org.w3.clearkey"==dk&&(this.a="webkit-org.w3.clearkey",fk=false);var gk=false,hk;hk=document.getElementsByTagName("video");hk=hk.length?hk[0]:document.createElement("video");for(var ik=0;ik<ek.length;++ik){var jk=ek[ik],kk={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:jk.initDataTypes,sessionTypes:["temporary"]},lk=false;if(jk.audioCapabilities)for(var mk=0;mk<jk.audioCapabilities.length;++mk){var nk=jk.audioCapabilities[mk];nk.contentType&&(lk=true,hk.canPlayType(nk.contentType.split(";")[0],this.a)&&(kk.audioCapabilities.push(nk),gk=true));}if(jk.videoCapabilities)for(mk=0;mk<jk.videoCapabilities.length;++mk)nk=jk.videoCapabilities[mk],nk.contentType&&(lk=true,hk.canPlayType(nk.contentType,this.a)&&(kk.videoCapabilities.push(nk),gk=true));lk||(gk=hk.canPlayType("video/mp4",this.a)||hk.canPlayType("video/webm",this.a));"required"==jk.persistentState&&(fk?(kk.persistentState="required",kk.sessionTypes=["persistent-license"]):gk=false);if(gk){this.b=kk;return;}}throw Error("None of the requested configurations were supported.");}fd.prototype.createMediaKeys=function(){var dk=new gd(this.a);return Promise.resolve(dk);};fd.prototype.getConfiguration=function(){return this.b;};function gd(dk){this.g=dk;this.b=null;this.a=new nc();this.c=[];this.f={};}function hd(dk,ek){dk.b=ek;pc(dk.a);ek&&(oc(dk.a,ek,"webkitneedkey",dk.Ya.bind(dk)),oc(dk.a,ek,"webkitkeymessage",dk.Xa.bind(dk)),oc(dk.a,ek,"webkitkeyadded",dk.Va.bind(dk)),oc(dk.a,ek,"webkitkeyerror",dk.Wa.bind(dk)));}j=gd.prototype;j.createSession=function(dk){var ek=dk||"temporary";if("temporary"!=ek&&"persistent-license"!=ek)throw new TypeError("Session type "+dk+" is unsupported on this platform.");dk=this.b||document.createElement("video");dk.src||(dk.src="about:blank");ek=new jd(dk,this.g,ek);this.c.push(ek);return ek;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Ya=function(dk){dk=qa({type:"encrypted",initDataType:"webm",initData:dk.initData});this.b.dispatchEvent(dk);};j.Xa=function(dk){var ek=id(this,dk.sessionId);ek&&(dk=qa({type:"message",messageType:void 0==ek.keyStatuses.a?"licenserequest":"licenserenewal",message:dk.message}),ek.b&&(ek.b.resolve(),ek.b=null),ek.dispatchEvent(dk));};j.Va=function(dk){if(dk=id(this,dk.sessionId))ld(dk,"usable"),dk.a&&dk.a.resolve(),dk.a=null;};j.Wa=function(dk){var ek=id(this,dk.sessionId);if(ek){var fk=Error("EME v0.1b key error");fk.errorCode=dk.errorCode;fk.errorCode.systemCode=dk.systemCode;!dk.sessionId&&ek.b?(fk.method="generateRequest",45==dk.systemCode&&(fk.message="Unsupported session type."),ek.b.reject(fk),ek.b=null):dk.sessionId&&ek.a?(fk.method="update",ek.a.reject(fk),ek.a=null):(fk=dk.systemCode,dk.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ld(ek,"output-restricted"):1==fk?ld(ek,"expired"):ld(ek,"internal-error"));}};function id(dk,ek){var fk=dk.f[ek];return fk?fk:(fk=dk.c.shift())?(fk.sessionId=ek,dk.f[ek]=fk):null;}function jd(dk,ek,fk){bd.call(this,null);this.f=dk;this.h=false;this.a=this.b=null;this.c=ek;this.g=fk;this.sessionId="";this.expiration=NaN;this.closed=new ec();this.keyStatuses=new nd();}m(jd,bd);function kd(dk,ek,fk){if(dk.h)return Promise.reject(Error("The session is already initialized."));dk.h=true;var gk;try{if("persistent-license"==dk.g){if(fk){gk=kb("LOAD_SESSION|"+fk);}else{var ik=new Uint8Array(ek);gk=kb("PERSISTENT|"+jb(ik));}}else gk=new Uint8Array(ek);}catch(hk){return Promise.reject(hk);}dk.b=new ec();try{dk.f.webkitGenerateKeyRequest(dk.c,gk);}catch(jk){if("InvalidStateError"!=jk.name)return dk.b=null,Promise.reject(jk);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,gk);}catch(kk){this.b.reject(kk),this.b=null;}}.bind(dk),10);}return dk.b;}j=jd.prototype;j.ta=function(dk,ek){if(this.a){this.a.then(this.ta.bind(this,dk,ek)).catch(this.ta.bind(this,dk,ek));}else{this.a=dk;var fk,gk;"webkit-org.w3.clearkey"==this.c?(fk=jb(new Uint8Array(ek)),gk=JSON.parse(fk),"oct"!=gk.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),fk=lb(gk.keys[0].k),gk=lb(gk.keys[0].kid)):(fk=new Uint8Array(ek),gk=null);try{this.f.webkitAddKey(this.c,fk,gk,this.sessionId);}catch(hk){this.a.reject(hk),this.a=null;}}};function ld(dk,ek){var fk=dk.keyStatuses;fk.size=void 0==ek?0:1;fk.a=ek;fk=qa({type:"keystatuseschange"});dk.dispatchEvent(fk);}j.generateRequest=function(dk,ek){return kd(this,ek,null);};j.load=function(dk){return "persistent-license"==this.g?kd(this,null,dk):Promise.reject(Error("Not a persistent session."));};j.update=function(dk){var ek=new ec();this.ta(ek,dk);return ek;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function md(dk){this.b=dk;this.a=0;}md.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:true}:{value:this.b[this.a++],done:false};};function nd(){this.size=0;this.a=void 0;}var od;j=nd.prototype;j.entries=function(){var dk=od,ek=[];this.a&&ek.push([dk,this.a]);return new md(ek);};j.forEach=function(dk){this.a&&dk(this.a);};j.get=function(dk){if(this.has(dk))return this.a;};j.has=function(dk){var ek=od;return this.a&&nb(new Uint8Array(dk),ek)?true:false;};j.keys=function(){var dk=od,ek=[];this.a&&ek.push(dk);return new md(ek);};j.values=function(){var dk=[];this.a&&dk.push(this.a);return new md(dk);};function pd(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(od=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=dd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ed,i.MediaKeys=gd,i.MediaKeySystemAccess=fd):(Navigator.prototype.requestMediaKeySystemAccess=ha,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ia,i.MediaKeys=ja,i.MediaKeySystemAccess=ka));}l("shaka.polyfill.MediaKeys.install",pd);l("shaka.polyfill.installAll",function(){w();s();pd();u();});function qd(){bd.call(this,null);this.a=new sa(3);this.g=new sa(10);this.f=0;}m(qd,bd);l("shaka.util.EWMABandwidthEstimator",qd);qd.prototype.sample=function(dk,ek){if(!(65536>ek)){dk=Math.max(dk,50);var fk=8000*ek/dk,gk=dk/1000;this.a.sample(gk,fk);this.g.sample(gk,fk);this.dispatchEvent(qa({type:"bandwidth"}));this.f=Date.now();}};qd.prototype.getBandwidth=function(){return .5>this.a.a?500000:Math.min(ta(this.a),ta(this.g));};qd.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};qd.prototype.supportsCaching=function(){return false;};function rd(dk,ek){qd.call(this);this.c=dk||0;this.b=void 0===ek?Infinity:ek;}m(rd,qd);l("shaka.util.EWMACacheBandwidthEstimator",rd);rd.prototype.sample=function(dk,ek){dk<=this.c&&8000*ek/dk>this.b||qd.prototype.sample.call(this,dk,ek);};rd.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function sd(){qd.call(this);}m(sd,qd);l("shaka.util.EWMASignedURLBandwidthEstimator",sd);sd.prototype.supportsCaching=function(){return true;};function td(dk){return Object.keys(dk).map(function(ek){return dk[ek];});}function ud(dk,ek){var fk=wd(dk,ek,"number");if(null==fk)return null;if(isNaN(fk)||fk==Number.NEGATIVE_INFINITY||fk==Number.POSITIVE_INFINITY)throw new RangeError("'"+ek+"' must be finite.");if(0>fk)throw new RangeError("'"+ek+"' must be >= 0");return fk;}function vd(dk,ek){return wd(dk,ek,"string");}function wd(dk,ek,fk){dk=dk[ek];if(null==dk)return null;if(typeof dk!=fk)throw new TypeError("'"+ek+"' must be a "+fk+".");return dk;}function xd(dk,ek,fk){dk=dk[ek];if(null==dk)return null;if(!(dk instanceof fk))throw new TypeError("'"+ek+"' must be an instance of "+fk.name+".");return dk;}var yd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function zd(dk){var ek;dk instanceof zd?(ae(this,dk.J),this.O=dk.O,this.I=dk.I,be(this,dk.V),this.G=dk.G,ce(this,dk.a.clone()),this.N=dk.N):dk&&(ek=String(dk).match(yd))?(ae(this,ek[1]||"",true),this.O=de(ek[2]||""),this.I=de(ek[3]||"",true),be(this,ek[4]),this.G=de(ek[5]||"",true),ce(this,ek[6]||"",true),this.N=de(ek[7]||"")):this.a=new le(null);}j=zd.prototype;j.J="";j.O="";j.I="";j.V=null;j.G="";j.N="";j.toString=function(){var dk=[],ek=this.J;ek&&dk.push(ee(ek,ge,true),":");if(ek=this.I){dk.push("//");var fk=this.O;fk&&dk.push(ee(fk,ge,true),"@");dk.push(encodeURIComponent(ek).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));ek=this.V;null!=ek&&dk.push(":",String(ek));}if(ek=this.G)this.I&&"/"!=ek.charAt(0)&&dk.push("/"),dk.push(ee(ek,"/"==ek.charAt(0)?ie:he,true));(ek=this.a.toString())&&dk.push("?",ek);(ek=this.N)&&dk.push("#",ee(ek,ke));return dk.join("");};j.resolve=function(dk){var ek=this.clone();"data"===ek.J&&(ek=new zd());var fk=!!dk.J;fk?ae(ek,dk.J):fk=!!dk.O;fk?ek.O=dk.O:fk=!!dk.I;fk?ek.I=dk.I:fk=null!=dk.V;var gk=dk.G;if(fk){be(ek,dk.V);}else if(fk=!!dk.G){if("/"!=gk.charAt(0))if(this.I&&!this.G){gk="/"+gk;}else{var hk=ek.G.lastIndexOf("/");-1!=hk&&(gk=ek.G.substr(0,hk+1)+gk);}if(".."==gk||"."==gk){gk="";}else if(-1!=gk.indexOf("./")||-1!=gk.indexOf("/.")){for(var hk=0==gk.lastIndexOf("/",0),gk=gk.split("/"),ik=[],jk=0;jk<gk.length;){var kk=gk[jk++];"."==kk?hk&&jk==gk.length&&ik.push(""):".."==kk?((1<ik.length||1==ik.length&&""!=ik[0])&&ik.pop(),hk&&jk==gk.length&&ik.push("")):(ik.push(kk),hk=true);}gk=ik.join("/");}}fk?ek.G=gk:fk=""!==dk.a.toString();fk?ce(ek,dk.a.clone()):fk=!!dk.N;fk&&(ek.N=dk.N);return ek;};j.clone=function(){return new zd(this);};function ae(dk,ek,fk){dk.J=fk?de(ek,true):ek;dk.J&&(dk.J=dk.J.replace(/:$/,""));}function be(dk,ek){if(ek){ek=Number(ek);if(isNaN(ek)||0>ek)throw Error("Bad port number "+ek);dk.V=ek;}else dk.V=null;}function ce(dk,ek,fk){ek instanceof le?dk.a=ek:(fk||(ek=ee(ek,je)),dk.a=new le(ek));}function de(dk,ek){return dk?ek?decodeURI(dk):decodeURIComponent(dk):"";}function ee(dk,ek,fk){return "string"==typeof dk?(dk=encodeURI(dk).replace(ek,fe),fk&&(dk=dk.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),dk):null;}function fe(dk){dk=dk.charCodeAt(0);return "%"+(dk>>4&15).toString(16)+(dk&15).toString(16);}var ge=/[#\/\?@]/g,he=/[\#\?:]/g,ie=/[\#\?]/g,je=/[\#\?@]/g,ke=/#/g;function le(dk){this.b=dk||null;}le.prototype.a=null;le.prototype.c=null;function me(dk,ek,fk){if(!dk.a&&(dk.a={},dk.c=0,dk.b))for(var gk=dk.b.split("&"),hk=0;hk<gk.length;hk++){var ik=gk[hk].indexOf("="),jk=null,kk=null;0<=ik?(jk=gk[hk].substring(0,ik),kk=gk[hk].substring(ik+1)):jk=gk[hk];jk=decodeURIComponent(jk.replace(/\+/g," "));kk=kk||"";me(dk,jk,decodeURIComponent(kk.replace(/\+/g," ")));}dk.b=null;(gk=dk.a.hasOwnProperty(ek)&&dk.a[ek])||(dk.a[ek]=gk=[]);gk.push(fk);dk.c++;}le.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var dk=[],ek;for(ek in this.a)for(var fk=encodeURIComponent(ek),gk=this.a[ek],hk=0;hk<gk.length;hk++){var ik=fk;""!==gk[hk]&&(ik+="="+encodeURIComponent(gk[hk]));dk.push(ik);}return this.b=dk.join("&");};le.prototype.clone=function(){var dk=new le();dk.b=this.b;if(this.a){var ek={},fk;for(fk in this.a)ek[fk]=this.a[fk].concat();dk.a=ek;dk.c=this.c;}return dk;};function ne(dk,ek){var fk=(new DOMParser()).parseFromString(dk,"text/xml");if(!fk)return null;ek||(ek=[new zd("")]);return mf({m:ek},fk,oe);}l("shaka.dash.mpd.parseMpd",ne);function oe(){this.id=this.url=null;this.type="static";this.b=this.j=this.m=null;this.g=5;this.i=this.c=this.f=null;this.h=1;this.a=[];}function pe(){this.g=this.f=this.c=this.m=this.a=this.start=this.id=null;this.b=[];}function qe(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.m=null;this.j=[];this.a=[];}function re(){this.value=null;}function se(){this.contentType=this.lang=this.id=null;}function te(){this.a=this.b=this.g=this.m=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function ue(){this.value=this.schemeIdUri=this.b=null;this.children=[];this.a=this.pssh=null;}function ve(){this.parsedPssh=this.psshBox=null;}function we(){this.url=null;}function xe(){this.url=null;}function ye(){this.m=null;this.g=1;this.c=this.b=this.a=this.f=null;}ye.prototype.clone=function(){var dk=new ye();dk.m=qf(this.m);dk.g=this.g;dk.f=this.f;dk.a=rf(this.a);dk.b=rf(this.b);dk.c=rf(this.c);return dk;};function ze(){this.a=this.url=null;}ze.prototype.clone=function(){var dk=new ze();dk.url=qf(this.url);dk.a=rf(this.a);return dk;};function af(){this.a=this.url=null;}af.prototype.clone=function(){var dk=new af();dk.url=qf(this.url);dk.a=rf(this.a);return dk;};function bf(){this.m=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bf.prototype.clone=function(){var dk=new bf();dk.m=qf(this.m);dk.a=this.a;dk.g=this.g;dk.c=this.c;dk.i=this.i;dk.h=rf(this.h);dk.b=qf(this.b)||[];dk.f=rf(this.f);return dk;};function cf(){this.a=this.b=null;}cf.prototype.clone=function(){var dk=new cf();dk.b=qf(this.b);dk.a=rf(this.a);return dk;};function df(){this.b=1;this.a=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}df.prototype.clone=function(){var dk=new df();dk.b=this.b;dk.i=this.i;dk.a=this.a;dk.j=this.j;dk.h=this.h;dk.f=this.f;dk.g=this.g;dk.c=rf(this.c);return dk;};function ef(){this.a=[];}ef.prototype.clone=function(){var dk=new ef();dk.a=qf(this.a)||[];return dk;};function ff(){this.c=this.a=this.b=null;}ff.prototype.clone=function(){var dk=new ff();dk.b=this.b;dk.a=this.a;dk.c=this.c;return dk;};function gf(dk,ek){this.Z=dk;this.end=ek;}gf.prototype.clone=function(){return new gf(this.Z,this.end);};oe.TAG_NAME="MPD";pe.TAG_NAME="Period";qe.TAG_NAME="AdaptationSet";re.TAG_NAME="Role";se.TAG_NAME="ContentComponent";te.TAG_NAME="Representation";ue.TAG_NAME="ContentProtection";ve.TAG_NAME="cenc:pssh";we.TAG_NAME="BaseURL";xe.TAG_NAME="Location";ye.TAG_NAME="SegmentBase";ze.TAG_NAME="RepresentationIndex";af.TAG_NAME="Initialization";bf.TAG_NAME="SegmentList";cf.TAG_NAME="SegmentURL";df.TAG_NAME="SegmentTemplate";ef.TAG_NAME="SegmentTimeline";ff.TAG_NAME="S";oe.prototype.parse=function(dk,ek){this.url=dk.m;this.id=sf(ek,"id",zf);this.type=sf(ek,"type",zf)||"static";this.b=sf(ek,"mediaPresentationDuration",uf);this.g=sf(ek,"minBufferTime",uf,this.g);this.f=sf(ek,"minimumUpdatePeriod",uf,this.f);this.c=sf(ek,"availabilityStartTime",tf,this.c);this.i=sf(ek,"timeShiftBufferDepth",uf,this.i);this.h=sf(ek,"suggestedPresentationDelay",uf,this.h);var fk=dk.m,gk=of(this,ek,we);this.m=jf(fk,gk);if(gk=mf(this,ek,xe))this.j=kf(fk,gk.url);this.a=of(this,ek,pe);};pe.prototype.parse=function(dk,ek){this.id=sf(ek,"id",zf);this.start=sf(ek,"start",uf);this.a=sf(ek,"duration",uf);var fk=of(this,ek,we);this.m=jf(dk.m,fk);this.c=mf(this,ek,ye);this.f=mf(this,ek,bf);this.g=mf(this,ek,df);this.b=of(this,ek,qe);hf(this);};function hf(dk){for(var ek=[],fk=0;fk<dk.b.length;++fk){var gk=dk.b[fk];null!=gk.group&&(ek[gk.group]=true);}for(fk=0;fk<dk.b.length;++fk)if(gk=dk.b[fk],null==gk.group){for(var hk=1;1==ek[hk];)++hk;ek[hk]=true;gk.group=hk;}}qe.prototype.parse=function(dk,ek){var fk=mf(this,ek,se)||{},gk=mf(this,ek,re);this.id=sf(ek,"id",zf);this.group=sf(ek,"group",yf);this.lang=sf(ek,"lang",zf,fk.lang);this.contentType=sf(ek,"contentType",zf,fk.contentType);this.width=sf(ek,"width",xf);this.height=sf(ek,"height",xf);this.b=sf(ek,"mimeType",zf);this.i=sf(ek,"codecs",zf);this.c=gk&&"main"==gk.value;this.lang&&(this.lang=fb(this.lang));fk=of(this,ek,we);this.m=jf(dk.m,fk);this.j=of(this,ek,ue);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=dk.c?lf(this,ek,dk.c):mf(this,ek,ye);this.g=dk.f?lf(this,ek,dk.f):mf(this,ek,bf);this.h=dk.g?lf(this,ek,dk.g):mf(this,ek,df);this.a=of(this,ek,te);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};re.prototype.parse=function(dk,ek){this.value=sf(ek,"value",zf);};se.prototype.parse=function(dk,ek){this.id=sf(ek,"id",zf);this.lang=sf(ek,"lang",zf);this.contentType=sf(ek,"contentType",zf);this.lang&&(this.lang=fb(this.lang));};te.prototype.parse=function(dk,ek){this.id=sf(ek,"id",zf);this.bandwidth=sf(ek,"bandwidth",xf);this.width=sf(ek,"width",xf,dk.width);this.height=sf(ek,"height",xf,dk.height);this.f=sf(ek,"mimeType",zf,dk.b);this.h=sf(ek,"codecs",zf,dk.i);this.lang=dk.lang;var fk=of(this,ek,we);this.m=jf(dk.m,fk);this.c=of(this,ek,ue);this.g=dk.f?lf(this,ek,dk.f):mf(this,ek,ye);this.b=dk.g?lf(this,ek,dk.g):mf(this,ek,bf);this.a=dk.h?lf(this,ek,dk.h):mf(this,ek,df);0==this.c.length&&(this.c=dk.j);};ue.prototype.parse=function(dk,ek){this.b=ek;this.schemeIdUri=sf(ek,"schemeIdUri",zf);this.value=sf(ek,"value",zf);var fk=sf(ek,"cenc:default_KID",zf);fk&&(this.a=fk.replace(/[-]/g,""));this.pssh=mf(this,ek,ve);this.children=Array.prototype.slice.call(ek.childNodes);};ve.prototype.parse=function(dk,ek){var fk=pf(ek);if(fk){this.psshBox=lb(fk);try{this.parsedPssh=new cc(this.psshBox);}catch(gk){if(!(gk instanceof RangeError))throw gk;}}};we.prototype.parse=function(dk,ek){this.url=pf(ek);};xe.prototype.parse=function(dk,ek){this.url=pf(ek);};ye.prototype.parse=function(dk,ek){this.m=dk.m||this.m;this.g=sf(ek,"timescale",xf,this.g);this.f=sf(ek,"presentationTimeOffset",yf,this.f);this.a=sf(ek,"indexRange",vf,this.a);this.b=mf(this,ek,ze)||this.b;this.c=mf(this,ek,af)||this.c;};ze.prototype.parse=function(dk,ek){var fk=sf(ek,"sourceURL",zf);this.url=kf(dk.m,fk);this.a=sf(ek,"range",vf,rf(dk.a));};af.prototype.parse=function(dk,ek){var fk=sf(ek,"sourceURL",zf);this.url=kf(dk.m,fk);this.a=sf(ek,"range",vf);};bf.prototype.parse=function(dk,ek){this.m=dk.m||this.m;this.a=sf(ek,"timescale",xf,this.a);this.g=sf(ek,"presentationTimeOffset",yf,this.g);this.c=sf(ek,"duration",xf,this.c);this.i=sf(ek,"startNumber",yf,this.i);this.h=mf(this,ek,af)||this.h;var fk=of(this,ek,cf);this.b=fk&&0<fk.length?fk:this.b;this.f=mf(this,ek,ef)||this.f;};cf.prototype.parse=function(dk,ek){var fk=sf(ek,"media",zf);this.b=kf(dk.m,fk);this.a=sf(ek,"mediaRange",vf);};df.prototype.parse=function(dk,ek){this.b=sf(ek,"timescale",xf,this.b);this.i=sf(ek,"presentationTimeOffset",yf,this.i);this.a=sf(ek,"duration",xf,this.a);this.j=sf(ek,"startNumber",yf,this.j);this.h=sf(ek,"media",zf,this.h);this.f=sf(ek,"index",zf,this.f);this.g=sf(ek,"initialization",zf,this.g);this.c=mf(this,ek,ef)||this.c;};ef.prototype.parse=function(dk,ek){this.a=of(this,ek,ff);};ff.prototype.parse=function(dk,ek){this.b=sf(ek,"t",yf);this.a=sf(ek,"d",yf);this.c=sf(ek,"r",wf);};function jf(dk,ek){if(!ek||0===ek.length)return dk;for(var fk=[],gk=0;gk<ek.length;gk++){var hk=ek[gk].url;null==dk||0===dk.length?fk.push(new zd(hk)):(hk=kf(dk.slice(0,1),hk),fk.push(hk[0]));}return fk;}function kf(dk,ek){if(!ek)return dk;var fk=new zd(ek);return dk?dk.map(function(gk){return gk.resolve(fk);}):[fk];}function lf(dk,ek,fk){var gk=rf(fk);(ek=nf(ek,fk.constructor.TAG_NAME))&&gk.parse(dk,ek);return gk;}function mf(dk,ek,fk){var gk=null;if(ek=nf(ek,fk.TAG_NAME))gk=new fk(),gk.parse(dk,ek);return gk;}function nf(dk,ek){for(var fk=null,gk=0;gk<dk.childNodes.length;gk++)if(dk.childNodes[gk].tagName==ek){if(fk)return null;fk=dk.childNodes[gk];}return fk;}function of(dk,ek,fk){for(var gk=[],hk=0;hk<ek.childNodes.length;hk++)if(ek.childNodes[hk].tagName==fk.TAG_NAME){var ik=new fk();ik.parse.call(ik,dk,ek.childNodes[hk]);gk.push(ik);}return gk;}function pf(dk){dk=dk.firstChild;return dk.nodeType!=Node.TEXT_NODE?null:dk.nodeValue;}function qf(dk){return dk?dk.map(function(ek){return ek.clone();}):null;}function rf(dk){return dk?dk.clone():null;}function sf(dk,ek,fk,gk){dk=fk(dk.getAttribute(ek));return null!=dk?dk:void 0!==gk?gk:null;}function tf(dk){if(!dk)return null;dk=Date.parse(dk);return isNaN(dk)?null:Math.floor(dk/1000);}function uf(dk){if(!dk)return null;var ek=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(dk);if(!ek)return null;dk=0;var fk=yf(ek[1]);fk&&(dk+=31536000*fk);(fk=yf(ek[2]))&&(dk+=2592000*fk);(fk=yf(ek[3]))&&(dk+=86400*fk);(fk=yf(ek[4]))&&(dk+=3600*fk);(fk=yf(ek[5]))&&(dk+=60*fk);ek=i.parseFloat(ek[6]);(ek=isNaN(ek)?null:ek)&&(dk+=ek);return dk;}function vf(dk){var ek=/([0-9]+)-([0-9]+)/.exec(dk);if(!ek)return null;dk=yf(ek[1]);if(null==dk)return null;ek=yf(ek[2]);return null==ek?null:new gf(dk,ek);}function wf(dk){dk=i.parseInt(dk,10);return isNaN(dk)?null:dk;}function xf(dk){dk=i.parseInt(dk,10);return 0<dk?dk:null;}function yf(dk){dk=i.parseInt(dk,10);return 0<=dk?dk:null;}function zf(dk){return dk;}function ag(dk,ek){this.url=dk;this.b=ek||new bg();this.g=this.i=this.h=0;this.a=null;this.c=new ec();this.f=null;}function bg(){this.body=null;this.a=1;this.g=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=false;}function cg(dk){dg(dk);dk.b.body=null;dk.c.destroy();dk.c=null;dk.f=null;}function dg(dk){dk.a&&(dk.a.onload=null,dk.a.onreadystatechange=null,dk.a.onerror=null,dk.a.ontimeout=null);dk.a=null;}j=ag.prototype;j.Ca=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var dk=this.url.split(":")[1].split(";").pop().split(","),ek=dk.pop(),ek="base64"==dk.pop()?i.atob(ek.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(ek);"arraybuffer"==this.b.f&&(ek=kb(ek).buffer);dk=JSON.parse(JSON.stringify(new XMLHttpRequest()));dk.response=ek;dk.responseText=ek.toString();ek=this.c;ek.resolve(dk);cg(this);return ek;}if(0==this.url.lastIndexOf("idb:",0))return this.j();this.h++;this.i=Date.now();this.g||(this.g=this.b.g);this.a=new XMLHttpRequest();dk=this.url;this.f&&!this.f.supportsCaching()&&(dk=new zd(dk),me(dk.a,"_",Date.now()),dk=dk.toString());this.a.open(this.b.method,dk,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.h;this.a.onload=this.Ja.bind(this);this.b.i&&(this.a.onreadystatechange=this.Na.bind(this));this.a.onerror=this.eb.bind(this);this.a.ontimeout=this.Sa.bind(this);for(ek in this.b.b)this.a.setRequestHeader(ek,this.b.b[ek]);this.a.send(this.b.body);return this.c;};function eg(dk,ek,fk){ek=Error(ek);ek.type=fk;ek.status=dk.a.status;ek.url=dk.url;ek.method=dk.b.method;ek.body=dk.b.body;ek.hb=dk.a;return ek;}j.Ja=function(dk){this.f&&this.f.sample(Date.now()-this.i,dk.loaded);200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),cg(this)):this.h<this.b.a?fg(this):(dk=eg(this,"HTTP error.","net"),this.c.reject(dk),cg(this));};j.Na=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED){var dk=Date.parse(this.a.getResponseHeader("Date"));dk&&(hb=dk-Date.now());}};j.eb=function(){var dk=eg(this,"Network failure.","net");this.c.reject(dk);cg(this);};j.Sa=function(){if(this.h<this.b.a){fg(this);}else{var dk=eg(this,"Request timed out.","net");this.c.reject(dk);cg(this);}};function fg(dk){dg(dk);i.setTimeout(dk.Ca.bind(dk),dk.g*(1+.5*(2*Math.random()-1)));dk.g*=2;}function gg(dk,ek,fk,gk){this.c=ek;this.h=fk||0;this.g=null!=gk?gk:null;this.b=this.a=null;this.i=dk;}function hg(dk,ek){return dk&&0!==dk.length?dk.map(function(fk){return fk.resolve(ek);}):[ek];}function ig(dk,ek,fk){if(dk.a)return dk.a;ek=ek||new bg();if(dk.h||dk.g)ek.b.Range="bytes="+(dk.h+"-"+(null!=dk.g?dk.g:""));dk.a=jg(dk,0,ek,fk);return dk.a;}gg.prototype.f=function(){if(this.b){this.a=null;var dk=this.b;if(dk.a&&dk.a.readyState!=XMLHttpRequest.DONE){dk.a.abort();var ek=eg(dk,"Request aborted.","aborted");dk.c.reject(ek);cg(dk);}this.b=null;}};function jg(dk,ek,fk,gk){var hk=dk.c[ek].toString();dk.i&&(hk=dk.i(hk,fk.b)||hk);dk.b=new ag(hk,fk);gk&&(dk.b.f=gk);hk=dk.b.Ca().then(ab(dk,function(ik){this.b=this.a=null;return Promise.resolve(ik.response);}));return hk=hk.catch(ab(dk,function(ik){if(this.a&&ek+1<this.c.length)return this.a=jg(this,ek+1,fk,gk);this.a=this.b=null;return Promise.reject(ik);}));}gg.prototype.clone=function(){return new gg(this.i,this.c.map(function(dk){return dk.clone();}),this.h,this.g);};gg.prototype.toString=function(){return this.c[0].toString();};function kg(dk,ek){this.a=new bg();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=ek?ek:0);this.a.i=true;this.b=dk;}function lg(dk){var ek=dk.b;return ig(ek,dk.a).then(function(fk){if(fk=ne(fk,ek.c))return Promise.resolve(fk);fk=Error("MPD parse failure.");fk.type="mpd";return Promise.reject(fk);});}function mg(dk,ek,fk,gk){if(!ek.a)return null;var hk=ek.a.h;if(!hk)return ek.m?new gg(dk,ek.m,0,null):null;fk=ng(hk,ek.id,fk,ek.bandwidth,gk);if(!fk)return null;ek=hg(ek.m,fk);return new gg(dk,ek,0,null);}function ng(dk,ek,fk,gk,hk){var ik={RepresentationID:ek,Number:fk,Bandwidth:gk,Time:hk};dk=dk.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(kk,lk,mk){if("$$"==kk)return "$";var nk=ik[lk];if(null==nk)return kk;"RepresentationID"==lk&&mk&&(mk=void 0);kk=nk.toString();mk=i.parseInt(mk,10)||1;mk=Math.max(0,mk-kk.length);return Array(mk+1).join("0")+kk;});try{return new zd(dk);}catch(jk){if(jk instanceof URIError)return null;throw jk;}}function og(dk,ek,fk){var gk=0;ek*=fk;dk=dk.a;fk=[];for(var hk=0;hk<dk.length&&dk[hk].a;++hk){var ik=dk[hk].b,ik=null!=ik?ik:gk,jk=dk[hk].c||0;0>jk&&(jk=dk[hk].a,jk=hk+1===dk.length?Math.ceil((dk[0].b+ek-ik)/jk)-1:Math.ceil((dk[hk+1].b-ik)/jk)-1);0<fk.length&&ik!=gk&&(fk[fk.length-1].end=ik);for(var kk=0;kk<=jk;++kk)gk=ik+dk[hk].a,fk.push({start:ik,end:gk}),ik=gk;}return fk;}function pg(dk,ek,fk){this.b=dk;this.a=ek;this.url=fk;}function qg(dk,ek){for(var fk=dk.length-1;0<=fk;--fk){var gk=dk[fk];if(ek>=gk.b&&(null==gk.a||ek<gk.a))return fk;}return -1;}function rg(dk,ek){return dk.map(function(fk){return new pg(fk.b+ek,null!=fk.a?fk.a+ek:null,fk.url);});}function sg(){}sg.prototype.parse=function(dk,ek,fk,gk){var hk=null;try{var jk,kk=new ua(ek);if(440786851!=wa(kk).id){jk=null;}else{var lk=wa(kk);if(408125543!=lk.id){jk=null;}else{var mk=lk.a.byteOffset,nk,ok=new ua(lk.a);for(ek=null;wb(ok.a);){var pk=wa(ok);if(357149030==pk.id){ek=pk;break;}}if(ek){for(var qk=new ua(ek.a),ok=1e+06;wb(qk.a);){var rk=wa(qk);if(2807729==rk.id){ok=za(rk);break;}}nk=ok/1e+09;}else nk=null;jk=nk?{$a:mk,fb:nk}:null;}}if(jk){var sk=wa(new ua(dk));if(475249515!=sk.id){hk=null;}else{var tk=jk.$a,uk=jk.fb;dk=[];var vk=new ua(sk.a);for(jk=sk=-1;wb(vk.a);){var wk=wa(vk);if(187==wk.id){var xk,yk=new ua(wk.a),zk=wa(yk);if(179!=zk.id){xk=null;}else{var al=za(zk),bl=wa(yk);if(183!=bl.id){xk=null;}else{for(var cl=new ua(bl.a),mk=0;wb(cl.a);){var dl=wa(cl);if(241==dl.id){mk=za(dl);break;}}xk={gb:al,Za:mk};}}if(xk){var el=uk*xk.gb,fl=tk+xk.Za;if(0<=sk){var gl=new gg(gk,fk,jk,fl-1);dk.push(new pg(sk,el,gl));}sk=el;jk=fl;}}}0<=sk&&(gl=new gg(gk,fk,jk,null),dk.push(new pg(sk,null,gl)));hk=dk;}}else hk=null;}catch(ik){if(!(ik instanceof RangeError))throw ik;}return hk;};function tg(dk){this.a=dk;this.b=0;}tg.prototype.destroy=function(){this.a=null;};tg.prototype.length=function(){return this.a.length;};function ug(dk){if(0==dk.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return dk.a[0];}function vg(dk){if(0==dk.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return dk.a[dk.a.length-1];}tg.prototype.get=function(dk){if(0>dk||dk>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[dk];};function wg(dk,ek){var fk=qg(dk.a,ek);return 0<=fk?dk.a[fk]:null;}function xg(dk,ek){var fk=ek-dk.b;0!=fk&&(dk.a=rg(dk.a,fk),dk.b=ek);}function yg(dk,ek,fk,gk,hk){this.b=ek;this.f=fk;this.a=null;this.c=hk;}yg.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);};yg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk=this.f.b,ek=[];dk.f&&(ek=og(dk.f,dk.a||1,this.b.a||0));var fk=0;dk.c&&dk.i?fk=dk.c*dk.i:0<ek.length&&(fk=ek[0].start-(dk.g||0));var gk=fk,hk=dk.b.length;0<ek.length&&ek.length!=dk.b.length&&(hk=Math.min(ek.length,dk.b.length));for(var ik=[],jk=0;jk<hk;++jk){var kk=dk.b[jk],lk=fk/dk.a,mk=null,nk=null;dk.c?(mk=fk+dk.c,nk=mk/dk.a):0<ek.length?(mk=ek[jk].end-(dk.g||0),nk=mk/dk.a):(nk=lk+this.b.a,mk=nk*dk.a);var fk=mk,mk=0,ok=null;kk.a&&(mk=kk.a.Z,ok=kk.a.end);nk=Math.min(this.b.a+gk/dk.a,nk);ik.push(new pg(lk,nk,new gg(this.c,kk.b,mk,ok)));}this.a=new tg(ik);return Promise.resolve(this.a);};function zg(dk,ek,fk,gk,hk){this.f=ek;this.b=fk;this.a=null;this.c=hk;}zg.prototype.destroy=function(){this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};zg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var dk=this.b.a,ek=og(dk.c,dk.b||1,this.f.a||0),fk=[],gk=0;gk<ek.length;++gk){var hk=ek[gk].start,ik=hk/dk.b,jk=ek[gk].end/dk.b,hk=mg(this.c,this.b,gk+dk.j,hk);if(!hk)return dk=Error("Failed to generate media URL."),dk.type="dash",Promise.reject(dk);var kk=(dk.i||0)/dk.b;fk.push(new pg(ik-kk,jk-kk,hk));}this.a=new tg(fk);return Promise.resolve(this.a);};function ah(dk,ek,fk,gk,hk){this.b=ek;this.c=fk;this.a=null;this.f=hk;}ah.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ah.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk,ek=this.c.a;ek:{dk=this.f;for(var fk=this.c,ek=Math.ceil(this.b.a/(ek.a/ek.b)),gk=fk.a,hk=[],ik=0;ik<ek;++ik){var jk=ik+1,kk=(jk-1)*gk.a,lk=kk/gk.b,kk=(kk+gk.a)/gk.b,jk=mg(dk,fk,jk-1+gk.j,(jk-1)*gk.a);if(!jk){dk=null;break ek;}hk.push(new pg(lk,kk,jk));}dk=hk;};dk?(0<dk.length&&(fk=dk[dk.length-1],dk[dk.length-1]=new pg(fk.b,this.b.a,fk.url)),dk=new tg(dk)):dk=null;this.a=dk;return this.a?Promise.resolve(this.a):(dk=Error("Failed to generate SegmentReferences"),dk.type="stream",Promise.reject(dk));};function bh(dk){this.b=dk;this.a=null;}bh.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};bh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk=new pg(0,null,this.b);this.a=new tg([dk]);return Promise.resolve(this.a);};function ch(){}ch.prototype.parse=function(dk,ek,fk,gk){var hk=null;try{dk:{var jk=[],kk=new tb(dk),lk=yb(kk);if(1936286840!=yb(kk)){hk=null;}else{1==lk&&(lk=zb(kk));var mk=xb(kk);bc(kk,3);bc(kk,4);var nk=yb(kk);if(0==nk){hk=null;}else{var ok,pk;0==mk?(ok=yb(kk),pk=yb(kk)):(ok=zb(kk),pk=zb(kk));bc(kk,2);var qk=kk.b.getUint16(kk.a,kk.c);kk.a+=2;dk=ok;ek=ek+lk+pk;for(lk=0;lk<qk;lk++){var rk=yb(kk);pk=(rk&2147483648)>>>31;var mk=rk&2147483647,sk=yb(kk);yb(kk);if(1==pk){hk=null;break dk;}var tk=new gg(gk,fk,ek,ek+mk-1);jk.push(new pg(dk/nk,(dk+sk)/nk,tk));dk+=sk;ek+=mk;}hk=jk;}}};}catch(ik){if(!(ik instanceof RangeError))throw ik;}return hk;};function dh(dk,ek,fk,gk,hk,ik,jk){this.f=fk;this.a=gk;this.c=hk;this.h=this.b=null;this.g=jk;}dh.prototype.destroy=function(){this.g=null;this.a.f();this.a=null;this.c&&(this.c.f(),this.c=null);this.h&&(this.h.destroy(),this.h=null);this.b=null;};dh.prototype.create=function(){if(this.b)return this.b;var dk=[ig(this.a)];"webm"==this.f&&dk.push(ig(this.c));return this.b=Promise.all(dk).then(ab(this,function(ek){var fk=ek[0];ek=ek[1]||null;var gk=null;"mp4"==this.f?(gk=new ch(),gk=gk.parse(new DataView(fk),this.a.h,this.a.c,this.g)):"webm"==this.f&&(gk=new sg(),gk=gk.parse(new DataView(fk),new DataView(ek),this.a.c,this.g));return gk?Promise.resolve(new tg(gk)):(fk=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),fk.type="stream",Promise.reject(fk));}));};function eh(dk){this.a=dk;}eh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);};eh.prototype.create=function(){return this.a?ig(this.a):Promise.resolve(null);};function fh(){this.b=gh++;this.id=this.K=this.F=null;this.h=0;this.height=this.width=this.bandwidth=null;this.f=this.c="";this.g=[];this.H=false;this.a=true;}var gh=0;fh.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.K&&(this.K.destroy(),this.K=null);};function hh(dk){var ek=dk.c||"";dk.f&&(ek+='; codecs="'+dk.f+'"');return ek;}function ih(){this.b=jh++;this.id=null;this.contentType=this.lang="";this.f=false;this.a=[];this.c=[];}var jh=0;ih.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.c=this.a=null;};function kh(dk){for(var ek=[],fk=0;fk<dk.c.length;++fk){var gk=new nh();gk.id=dk.b;gk.a=dk.c[fk];gk.contentType=dk.contentType;gk.b=dk.a.length?hh(dk.a[0]):"";ek.push(gk);}return ek;}function lh(){this.id=null;this.start=0;this.b=null;this.a=[];}lh.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.a=null;};function mh(){this.b=false;this.g=this.h=this.f=null;this.c=0;this.a=[];}mh.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.a=null;};function nh(){this.id=0;this.a=null;this.b=this.contentType="";}function oh(dk){this.a=dk;}function ph(dk){if(dk.a.length){null==dk.a[0].start&&(dk.a[0].start=0);var ek=function(lk){return 0==lk||!!lk;};"dynamic"==dk.type&&(dk.b=null);ek(dk.b)&&1==dk.a.length&&!ek(dk.a[0].a)&&(dk.a[0].a=dk.b);for(var fk=0,gk=true,hk=0;hk<dk.a.length;++hk){var ik=dk.a[hk-1],jk=dk.a[hk],kk=dk.a[hk+1]||{start:dk.b};!ek(jk.start)&&ik&&ek(ik.start)&&ek(ik.a)&&(jk.start=ik.start+ik.a);!ek(jk.a)&&ek(kk.start)&&(jk.a=kk.start-jk.start);null!=jk.start&&null!=jk.a?fk+=jk.a:gk=false;}ek(dk.b)||(hk=dk.a[dk.a.length-1],gk?dk.b=fk:ek(hk.start)&&ek(hk.a)?dk.b=hk.start+hk.a:"dynamic"!=dk.type&&(dk.b=fk));}}function qh(dk,ek,fk,gk){var hk=new lh();hk.id=fk.id;hk.start=fk.start;hk.b=fk.a;var ik=new jc();fk.b.forEach(function(sk){ik.push(sk.contentType||"",sk);});for(var jk=mc(ik),kk=0;kk<jk.length;++kk){var lk=new jc();ik.get(jk[kk]).forEach(function(sk){lk.push(sk.group,sk);});for(var mk=mc(lk),nk=0;nk<mk.length;++nk){var ok=new jc();lk.get(mk[nk]).forEach(function(sk){ok.push(sk.lang,sk);});for(var pk=mc(ok),qk=0;qk<pk.length;++qk){var rk=ok.get(pk[qk]),rk=rh(dk,ek,fk,rk,gk);hk.a.push(rk);}}}return hk;}function rh(dk,ek,fk,gk,hk){z(gk.every(function(qk){return qk.group==gk[0].group&&(qk.lang||"")==(gk[0].lang||"")&&(qk.contentType||"")==(gk[0].contentType||"");}));var ik=new ih(),jk=gk.filter(function(qk){return null!=qk.id;});jk.length==gk.length&&(ik.id=jk.map(function(qk){return qk.id;}).sort().reduce(function(qk,rk){return qk+","+rk;}));ik.lang=gk[0].lang||"";ik.contentType=gk[0].contentType||"";ik.f=gk.some(function(qk){return qk.c;});for(var jk={},kk=0;kk<gk.length;++kk)for(var lk=gk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk],ok=uh(dk,nk),pk=ik.c.slice(0);th(ok,pk);0==pk.length&&0<ik.c.length||!(nk=wh(ek,fk,nk,hk))||(ik.a.push(nk),ik.c=pk,jk[nk.b]=lk);}if(ik.c.some(function(qk){return ""==qk.a;}))return ik.a.forEach(function(qk){qk.H=true;}),ik;dk=sh(gk);for(kk=0;kk<ik.a.length;++kk)nk=ik.a[kk],lk=jk[nk.b],lk==dk&&(nk.H=true);return ik;}function sh(dk){for(var ek=null,fk=null,gk=0;gk<dk.length;++gk)for(var hk=dk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik],jk=(jk.width||1)*(jk.height||1)*(jk.bandwidth||1);if(null==ek||jk<ek)ek=jk,fk=hk;}return fk;}function th(dk,ek){if(0==ek.length){Array.prototype.push.apply(ek,dk);}else for(var fk=0;fk<ek.length;++fk){for(var gk=false,hk=0;hk<dk.length;++hk){var ik=ek[fk],jk=dk[hk];if(ik.a==jk.a&&ik.j==jk.j&&ik.o==jk.o&&ik.f==jk.f&&ik.g==jk.g&&ik.i==jk.i&&ik.l==jk.l&&ik.h==jk.h&&ik.s==jk.s&&nb(ik.c,jk.c)){gk=true;break;}}gk||(ek.splice(fk,1),--fk);}}function uh(dk,ek){var fk=[];if(0==ek.c.length){fk.push(new ob());}else if(dk.a)for(var gk=0;gk<ek.c.length;++gk)fk.push.apply(fk,vh(dk,ek.c[gk]));return fk;}function vh(dk,ek){var fk=[];if(2==dk.a.length){var gk=dk.a(ek.schemeIdUri,ek.b);if(!(gk&&gk instanceof Array))return [];for(var hk=0;hk<gk.length;++hk){var ik,jk=gk[hk];ik=new ob();if(jk){var kk=vd(jk,"keySystem");if(null!=kk){ik.a=kk;}else throw Error("'keySystem' cannot be null.");var lk=vd(jk,"licenseServerUrl");if(null!=lk){ik.j=lk;}else if(kk)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");kk=wd(jk,"withCredentials","boolean");null!=kk&&(ik.o=kk);kk=xd(jk,"licensePostProcessor",Function);null!=kk&&(ik.f=kk);kk=xd(jk,"licensePreProcessor",Function);null!=kk&&(ik.g=kk);kk=wd(jk,"distinctiveIdentifierRequired","boolean");null!=kk&&(ik.i=kk);kk=wd(jk,"persistentStateRequired","boolean");null!=kk&&(ik.l=kk);kk=vd(jk,"audioRobustness");null!=kk&&(ik.h=kk);kk=vd(jk,"videoRobustness");null!=kk&&(ik.s=kk);kk=xd(jk,"serverCertificate",Uint8Array);null!=kk&&(ik.c=kk);if(kk=xd(jk,"initData",Object)){jk=xd(kk,"initData",Uint8Array);if(null==jk)throw Error("'initData.initData' cannot be null.");kk=vd(kk,"initDataType");if(null==kk)throw Error("'initData.initDataType' cannot be null.");ik.b.push({initData:new Uint8Array(jk.buffer),initDataType:kk});}}0==ik.b.length&&ek.pssh&&ek.pssh.psshBox&&pb(ik,[{initData:ek.pssh.psshBox,initDataType:"cenc"}]);fk.push(ik);}}else{gk=dk.a(ek);if(!(gk&&gk instanceof qb))return [];hk=new ob();hk.a=gk.g;hk.j=gk.j;hk.o=gk.o;hk.f=gk.h;hk.g=gk.i;hk.i=gk.f;hk.l=gk.l;hk.h=gk.c;hk.s=gk.s;hk.c=gk.b?new Uint8Array(gk.b.buffer):null;pb(hk,gk.a);fk.push(hk);}return fk;}function wh(dk,ek,fk,gk){if(!fk.m||0===fk.m.length)return null;var hk=null,ik=1,jk=0;if(fk.g){ek=fk.f.split("/")[1],"mp4"!=ek&&"webm"!=ek?hk=null:(dk=fk.g,"webm"!=ek||dk.c?dk.a||dk.b&&dk.b.a?(hk=dk.b,hk||(hk=new ze(),hk.url=fk.m,hk.a=dk.a?dk.a.clone():null),hk=yh(hk,gk),dk=dk.c?yh(dk.c,gk):null,gk=new dh(0,0,ek,hk,dk,0,gk),ek=new eh(dk),dk=new fh(),dk.F=gk,dk.K=ek,hk=dk):hk=null:hk=null),ik=fk.g.g,jk=fk.g.f;}else if(fk.b){dk=fk.b,!dk.c&&!dk.f&&1<dk.b.length?hk=null:dk.c||ek.a||dk.f||1!=dk.b.length?dk.f&&0===dk.f.a.length?hk=null:(dk=dk.h?yh(dk.h,gk):null,gk=new yg(0,ek,fk,0,gk),ek=new eh(dk),dk=new fh(),dk.F=gk,dk.K=ek,hk=dk):hk=null,ik=fk.b.a,jk=fk.b.g;}else if(fk.a){dk:if(hk=fk.a,ik=0+(hk.f?1:0),ik+=hk.c?1:0,ik+=hk.a?1:0,0==ik?ik=false:(1!=ik&&(hk.f?(hk.c=null,hk.a=null):hk.c&&(hk.a=null)),ik=true),ik){ik=null;if(hk.g&&(ik=(hk=fk.a.g)?xh(fk,hk,af):null,!ik)){hk=null;break dk;}hk=ik?yh(ik,gk):null;ik=fk.a;ik.f?(ek=fk.f.split("/")[1],"mp4"!=ek&&"webm"!=ek?gk=null:"webm"!=ek||hk?mg(gk,fk,1,0)?(dk=(dk=fk.a.f)?xh(fk,dk,ze):null)?(dk=yh(dk,gk),gk=new dh(0,0,ek,dk,hk,0,gk)):gk=null:gk=null:gk=null):gk=ik.h?ik.c?new zg(0,ek,fk,0,gk):ik.a?"dynamic"!=dk.type&&null==ek.a?null:new ah(0,ek,fk,0,gk):null:null;gk?(ek=new eh(hk),dk=new fh(),dk.F=gk,dk.K=ek,hk=dk):hk=null;}else hk=null;;ik=fk.a.b;jk=fk.a.i;}else "text"==fk.f.split("/")[0]&&(hk=new fh(),hk.F=new bh(new gg(gk,fk.m)));if(!hk)return null;hk.id=fk.id;jk&&(hk.h=-1*jk/ik);hk.bandwidth=fk.bandwidth;hk.width=fk.width;hk.height=fk.height;hk.c=fk.f||"";hk.f=fk.h||"";for(gk=0;gk<fk.c.length;++gk)ek=fk.c[gk],ek.a&&hk.g.push(ek.a);return hk;}function xh(dk,ek,fk){ek=ng(ek,dk.id,null,dk.bandwidth,null);if(!ek)return null;fk=new fk();fk.url=hg(dk.m,ek);return fk;}function yh(dk,ek){var fk=dk.url,gk=0,hk=null;dk.a&&(gk=dk.a.Z,hk=dk.a.end);return new gg(ek,fk,gk,hk);}function zh(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function ai(dk,ek){var fk=new bi(ek);dk.streamHistory.push(new ci(fk));if(fk.videoHeight||!dk.streamStats)dk.streamStats=fk;}function bi(dk){this.videoWidth=dk.width;this.videoHeight=dk.height;this.videoMimeType=dk.c;this.videoBandwidth=dk.bandwidth;}function ci(dk){this.timestamp=(Date.now()+hb)/1000;this.value=dk;}function di(dk,ek,fk,gk,hk){bd.call(this,dk);this.c=ek;this.a=new rc(fk,gk,hk);this.v=this.B=this.b=null;this.C=false;this.g=null;this.l=false;this.i=null;this.o=false;this.h=new ec();this.j=this.f=false;this.D=0;this.u=15;this.w=false;}m(di,bd);di.prototype.A=function(dk){null!=dk.initialStreamBufferSize&&(this.D=Number(dk.initialStreamBufferSize));null!=dk.streamBufferSize&&(this.u=Number(dk.streamBufferSize));null!=dk.segmentRequestTimeout&&(this.a.s=Number(dk.segmentRequestTimeout));};di.prototype.destroy=function(){ki(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.s=this.c=this.a=null;};j=di.prototype;j.ka=function(){return this.b;};j.wa=function(){return this.B;};j.Da=function(dk){this.f||dk.then(function(){this.f=true;this.g||ji(this,0);}.bind(this)).catch(function(){});return this.h;};j.xa=function(){return this.j;};j.ma=function(dk,ek,fk){dk!=this.b&&(this.v=dk.K.create(),dk.F.create().then(ab(this,function(gk){if(this.c){var hk=this.b;this.b=dk;this.B=gk;this.C=true;this.l||(hk?ek&&ei(this,true,fk):ji(this,0));}})).catch(ab(this,function(gk){"aborted"!=gk.type&&(this.f?(gk=ra(gk),this.dispatchEvent(gk)):this.h.reject(gk));})));};j.za=function(){return ei(this,false);};function ei(dk,ek,fk){dk.b&&!dk.l&&(dk.l=true,ki(dk),xc(dk.a).then(ab(dk,function(){var gk=this.c.currentTime;if(!ek&&0<tc(this.a,gk)&&0<=qg(this.a.b,gk))return Promise.resolve();if(fk)return wc(this.a,this.c.currentTime+fk);this.w=true;return vc(this.a);})).then(ab(dk,function(){this.l=false;ji(this,0);})).catch(ab(dk,function(gk){this.l=false;this.f?(gk=ra(gk),this.dispatchEvent(gk)):this.h.reject(gk);})));}j.Aa=function(dk){return 0<tc(this.a,dk)&&0<=qg(this.a.b,dk);};j.la=function(){};j.ra=function(){return true;};j.sa=function(){return this.o?this.u:Math.min(this.D,this.u);};j.Ua=function(){if(this.o&&!this.f){this.g=null;}else{var dk;if(dk=this.f&&!this.j)dk=1<this.a.c.buffered.length?true:false;if(dk){ei(this,true);}else{this.g=null;dk=this.b;var ek=this.B,fk=this.c.currentTime;tc(this.a,this.o?fk:fk+(this.i||0))>=this.sa()?(gi(this),ji(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(ek=fi(this,fk,ek))?(ek=uc(this.a,ek,dk.h,this.v),this.v=null,this.C&&(this.C=false,hi(this,dk)),this.j=false,ek.then(ab(this,function(gk){null==this.i&&(this.i=gk);this.w&&0<tc(this.a,fk)&&(this.w=false,this.c.currentTime+=.001);ji(this,0);})).catch(ab(this,function(gk){if("aborted"!=gk.type){var hk=[0,404,410];"net"==gk.type&&-1!=hk.indexOf(gk.hb.status)&&this.b&&ji(this,1000);gk=ra(gk);this.dispatchEvent(gk);}}))):(gi(this),this.f&&!this.j&&(this.j=true,ii(this)),ji(this,200));}}};function fi(dk,ek,fk){dk=dk.a;var gk=dk.b.length;dk=0<gk?dk.b[gk-1]:null;return null!=dk?null!=dk.a?wg(fk,dk.a):null:wg(fk,ek)||(fk.length()?vg(fk):null);}function gi(dk){if(!dk.o&&null!=dk.i){dk.o=true;var ek=dk.a,fk=dk.i,gk=fk-ek.o;0!=gk&&(ek.b=rg(ek.b,gk),ek.o=fk);dk.h.resolve(dk.i);}}function hi(dk,ek){var fk;fk=ek.c.split("/")[0];fk=qa({type:"adaptation",bubbles:true,contentType:fk,size:"video"!=fk?null:{width:ek.width,height:ek.height},bandwidth:ek.bandwidth});dk.dispatchEvent(fk);}function ii(dk){var ek=qa({type:"ended"});dk.dispatchEvent(ek);}function ji(dk,ek){dk.g=i.setTimeout(dk.Ua.bind(dk),ek);}function ki(dk){null!=dk.g&&(i.clearTimeout(dk.g),dk.g=null);}function li(dk,ek){bd.call(this,dk);this.b=ek;this.h=true;this.g=this.f=null;this.c=new ec();this.a=null;}m(li,bd);li.prototype.A=function(){};li.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.s=this.b=this.f=this.g=this.a=this.c=null;};j=li.prototype;j.ka=function(){return this.f;};j.wa=function(){return this.g;};j.Da=function(){return this.c;};j.xa=function(){return true;};j.ma=function(dk){dk.F.create().then(ab(this,function(ek){if(this.b){if(0==ek.length())return Promise.reject(Error("No subtitles URL available."));var fk=this.f;this.f=dk;this.g=ek;ek=ug(ek).url.c[0].toString();var gk=this.ra();this.a&&(this.la(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=ek;this.la(gk);ek=qa({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:dk.bandwidth});this.dispatchEvent(ek);fk||this.c.resolve(0);}}));};j.za=function(){};j.Aa=function(){return true;};j.la=function(dk){this.h=dk;this.a&&(this.a.track.mode=dk?"showing":"disabled");};j.ra=function(){return this.h;};j.sa=function(){return 0;};function mi(dk,ek,fk,gk,hk){this.b=new gg(null,[new zd(dk)]);this.a=new bg();this.a.body=ek;this.a.method=fk;this.a.a=3;this.a.h=gk;this.a.c=0;dk=hk||{};for(var ik in dk)this.a.b[ik]=dk[ik];}function ni(dk){return ig(dk.b,dk.a).then(function(ek){return Promise.resolve(new Uint8Array(ek));});}function oi(dk,ek,fk){bd.call(this,dk);this.b=ek;this.j=fk;this.a=this.f=null;this.i=new nc();this.g={};this.h=[];this.o=0;this.c=new ec();this.l=null;}m(oi,bd);oi.prototype.destroy=function(){this.s=null;for(var dk=0;dk<this.h.length;++dk)this.h[dk].close().catch(function(){});this.h=[];this.g=this.a=this.f=null;this.c.destroy();this.c=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.b=this.j=null;};oi.prototype.initialize=function(){var dk=new jc(),ek;ek=this.j;if(ek.w){ek=ek.a.a[0];for(var fk=[],gk=0;gk<ek.a.length;++gk)fk.push.apply(fk,kh(ek.a[gk]));ek=fk;}else ek=[];for(fk=0;fk<ek.length;++fk)gk=ek[fk],gk.a.a||gk.b&&!vi(gk.b)||dk.push(gk.contentType,gk);for(var fk={},gk=false,hk=0;hk<ek.length;++hk){var ik=ek[hk];if(ik.a.a&&!dk.a.hasOwnProperty(ik.contentType)){var jk=ik.a.a,kk=fk[jk];kk||(kk=ik.a,kk={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:kk.i?"required":"optional",persistentState:kk.l?"required":"optional",sessionTypes:["temporary"]},fk[jk]=kk);if(ik.b&&(jk=ik.contentType+"Capabilities",jk in kk)){gk=true;kk[jk]||(kk[jk]=[]);var lk;"audio"==ik.contentType?lk=ik.a.h:"video"==ik.contentType&&(lk=ik.a.s);kk[jk].push({contentType:ik.b,robustness:lk});}}}if(!gk)if(ek.length){this.a=ek[0].a;}else throw dk=Error("No DrmInfo exists!"),dk.type="drm",dk;if(0==Object.keys(fk).length)return ij(this.j,dk),this.c.resolve(),Promise.resolve();lk=new ec();fk=pi(fk,lk);fk=fk.then(this.Fa.bind(this,ek,dk));fk=fk.then(this.ab.bind(this));lk.reject(null);return fk;};function pi(dk,ek){for(var fk in dk)ek=ek.catch(function(gk,hk){return navigator.requestMediaKeySystemAccess(gk,[hk]);}.bind(null,fk,dk[fk]));return ek;}j=oi.prototype;j.Fa=function(dk,ek,fk){if(!this.b)return qi();for(var gk=fk.keySystem,hk=fk.getConfiguration(),ik=["audio","video"],jk=0;jk<ik.length;++jk){var kk=ik[jk];if(!ek.a.hasOwnProperty(kk)){var lk=hk[kk+"Capabilities"];if(lk&&lk.length){for(var lk=lk[0],mk=[],nk={},ok=0;ok<dk.length;++ok){var pk=dk[ok];if(pk.a.a==gk&&pk.b==lk.contentType&&!(pk.id in nk)){mk.push(pk);nk[pk.id]=true;var qk;if(this.a){qk=this.a;var pk=pk.a,rk=new ob();rk.a=qk.a;rk.j=qk.j;rk.o=qk.o;rk.f=qk.f;rk.g=qk.g;rk.i=qk.i;rk.l=qk.l;rk.h=qk.h;rk.s=qk.s;rk.c=qk.c?new Uint8Array(qk.c.buffer):null;pb(rk,qk.b);pb(rk,pk.b);qk=rk;}else qk=pk.a;this.a=qk;}}ek.a[kk]=mk;}}}ij(this.j,ek);return fk.createMediaKeys();};j.ab=function(dk){if(!this.b)return qi();this.f=dk;return this.b.setMediaKeys(this.f).then(ab(this,function(){return this.b?this.a.c?this.f.setServerCertificate(this.a.c):Promise.resolve():qi();})).then(ab(this,function(){if(!this.b)return qi();for(var ek=0;ek<this.a.b.length;++ek){var fk=this.a.b[ek];this.ya({type:"encrypted",initDataType:fk.initDataType,initData:fk.initData});}0==this.a.b.length&&oc(this.i,this.b,"encrypted",this.ya.bind(this));}));};function qi(){var dk=Error("EmeManager destroyed");dk.type="destroy";return Promise.reject(dk);}j.ya=function(dk){var ek=new Uint8Array(dk.initData),fk=Array.prototype.join.apply(ek);if(!this.g[fk]){try{var hk=ri(this);}catch(gk){hk=ra(gk);this.dispatchEvent(hk);this.c.reject(gk);return;}dk=hk.generateRequest(dk.initDataType,dk.initData);this.g[fk]=true;dk.catch(ab(this,function(ik){if(this.g){this.g[fk]=false;var jk=ra(ik);this.dispatchEvent(jk);this.c.reject(ik);}}));this.h.push(hk);}};function ri(dk){var ek=null,ek=dk.f.createSession();oc(dk.i,ek,"message",dk.Qa.bind(dk));oc(dk.i,ek,"keystatuseschange",dk.Ia.bind(dk));return ek;}j.Qa=function(dk){si(this,dk.target,this.a,dk.message);};j.Ia=function(dk){dk=dk.target.keyStatuses;for(var ek={},fk=dk.keys(),gk=fk.next();!gk.done;gk=fk.next()){var hk=mb(new Uint8Array(gk.value)),gk=dk.get(gk.value);ek[hk]=gk;}lj(this.j,ek);};function si(dk,ek,fk,gk){gk=ti(fk,gk);ni(new mi(gk.url,gk.body,gk.method,fk.o,gk.headers)).then(ab(dk,function(hk){fk.f&&(hk=fk.f(hk));return ek.update(hk);})).then(ab(dk,function(){var hk=qa({type:"sessionReady",detail:ek});this.dispatchEvent(hk);this.o++;this.o>=this.h.length&&this.c.resolve();})).catch(ab(dk,function(hk){hk.lb=ek;hk=ra(hk);this.dispatchEvent(hk);}));}function ti(dk,ek){var fk={url:dk.j,body:ek.slice(0),method:"POST",headers:{}};if(!dk.g)return fk;dk.g(fk);fk.url=vd(fk,"url");if(null==fk.url)throw Error("'url' cannot be null.");if(!(fk.body instanceof ArrayBuffer||"string"==typeof fk.body||null==fk.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");fk.method=vd(fk,"method");if("GET"!=fk.method&&"POST"!=fk.method)throw Error("'method' must be either 'GET' or 'POST'.");fk.headers=xd(fk,"headers",Object);if(null==fk.headers)throw Error("'headers' cannot be null.");return fk;}function ui(dk){bd.call(this,null);this.a=dk;this.b=null;this.f=new nc();this.j=this.l=null;this.A=0;this.v=null;this.i=false;this.C=true;this.g=new zh();this.c={enableAdaptation:true,streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new r()};this.o=1;this.B=null;}m(ui,bd);l("shaka.player.Player",ui);ui.version="";ui.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ui.prototype.ba=function(dk){this.C=dk;};ui.prototype.setResumeAfterBuffering=ui.prototype.ba;function vi(dk){return "text/vtt"==dk?!!i.VTTCue:MediaSource.isTypeSupported(dk);}ui.isTypeSupported=vi;ui.setTextStyle=function(dk){var ek=document.getElementById("ShakaPlayerTextStyle");ek||(ek=document.createElement("style"),ek.id="ShakaPlayerTextStyle",document.head.appendChild(ek));for(ek=ek.sheet;ek.cssRules.length;)ek.deleteRule(0);ek.insertRule("::cue { "+ba(dk)+" }",0);};ui.prototype.destroy=function(){return this.u().then(ab(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ui.prototype.destroy=ui.prototype.destroy;ui.prototype.u=function(){if(!this.b)return Promise.resolve();this.i&&aj(this);this.a.pause();pc(this.f);zi(this);xi(this);this.l&&(this.l.destroy(),this.l=null);this.a.src="";var dk=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.i=false;this.g=new zh();return dk;};ui.prototype.unload=ui.prototype.u;ui.prototype.ia=function(dk){gj(dk,this.a);var ek=this.u();this.a.autoplay&&(la("load"),oc(this.f,this.a,"timeupdate",this.Ha.bind(this)));dk.ha(this.c);dk.L=this.B;this.B=null;ek=ek.then(ab(this,function(){return dk.X();}));ek.catch(ab(this,function(fk){dk.destroy();return Promise.reject(fk);}));return ek.then(ab(this,function(){if(!this.a)return wi();this.b=dk;oc(this.f,this.b,"seekrangechanged",this.Oa.bind(this));this.l=new oi(this,this.a,this.b);return this.l.initialize();})).then(ab(this,function(){if(!this.a)return wi();oc(this.f,this.a,"error",this.bb.bind(this));oc(this.f,this.a,"playing",this.Ma.bind(this));oc(this.f,this.a,"pause",this.La.bind(this));return hj(this.b,this,this.a);})).then(ab(this,function(){if(!this.a)return wi();yi(this);})).catch(ab(this,function(fk){if(!this.a)return wi();if("destroy"!=fk.type){var gk=ra(fk);this.dispatchEvent(gk);}return this.u().then(function(){return Promise.reject(fk);});}));};ui.prototype.load=ui.prototype.ia;function wi(){var dk=Error("Player destroyed");dk.type="destroy";return Promise.reject(dk);}j=ui.prototype;j.Ha=function(){ma("load");this.g.playbackLatency=na("load")/1000;this.f.$(this.a,"timeupdate");};j.bb=function(){if(this.a.error){var dk=this.a.error.code;dk!=MediaError.MEDIA_ERR_ABORTED&&(dk=Error(bj[dk]||"Unknown playback error."),dk.type="playback",dk=ra(dk),this.dispatchEvent(dk));}};j.Ma=function(){la("playing");!this.j&&0>this.o&&(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),this.o));this.i&&aj(this);};j.La=function(){ma("playing");var dk=na("playing");if(!isNaN(dk)){var ek=this.g;ek.playTime+=dk/1000;}xi(this);};j.Oa=function(dk){this.A=dk.start;};j.Ba=function(){if(!this.a.paused){ma("playing");var dk=na("playing");if(!isNaN(dk)){var ek=this.g;ek.playTime+=dk/1000;la("playing");}}dk=this.g;ek=this.a;ek.getVideoPlaybackQuality&&(ek=ek.getVideoPlaybackQuality(),dk.decodedFrames=ek.totalVideoFrames,dk.droppedFrames=ek.droppedVideoFrames);return this.g;};ui.prototype.getStats=ui.prototype.Ba;ui.prototype.ha=function(){return this.b?this.b.D():[];};ui.prototype.getVideoTracks=ui.prototype.ha;ui.prototype.ea=function(){return this.b?this.b.S():[];};ui.prototype.getAudioTracks=ui.prototype.ea;ui.prototype.ga=function(){return this.b?this.b.ia():[];};ui.prototype.getTextTracks=ui.prototype.ga;ui.prototype.selectVideoTrack=function(dk,ek){return this.b?this.b.selectVideoTrack(dk,void 0==ek?true:ek):false;};ui.prototype.selectVideoTrack=ui.prototype.selectVideoTrack;ui.prototype.ja=function(dk,ek){return this.b?nj(this.b,"audio",dk,void 0==ek?true:ek):false;};ui.prototype.selectAudioTrack=ui.prototype.ja;ui.prototype.na=function(dk){return this.b?nj(this.b,"text",dk,false):false;};ui.prototype.selectTextTrack=ui.prototype.na;ui.prototype.da=function(dk){this.b&&jj(this.b,dk);};ui.prototype.enableTextTrack=ui.prototype.da;ui.prototype.L=function(dk){this.h({enableAdaptation:dk});};ui.prototype.enableAdaptation=ui.prototype.L;ui.prototype.M=function(){return this.c.enableAdaptation;};ui.prototype.getAdaptationEnabled=ui.prototype.M;ui.prototype.ca=function(dk){this.h({streamBufferSize:dk});};ui.prototype.setStreamBufferSize=ui.prototype.ca;ui.prototype.S=function(){return Number(this.c.streamBufferSize);};ui.prototype.getStreamBufferSize=ui.prototype.S;ui.prototype.pa=function(dk){this.h({licenseRequestTimeout:dk/1000});};ui.prototype.setLicenseRequestTimeout=ui.prototype.pa;ui.prototype.U=function(dk){this.h({mpdRequestTimeout:dk/1000});};ui.prototype.setMpdRequestTimeout=ui.prototype.U;ui.prototype.Y=function(dk){this.h({segmentRequestTimeout:dk/1000});};ui.prototype.setRangeRequestTimeout=ui.prototype.Y;ui.prototype.X=function(dk){this.h({preferredLanguage:dk});};ui.prototype.setPreferredLanguage=ui.prototype.X;ui.prototype.W=function(dk){xi(this);0<=dk?this.a.playbackRate=dk:this.a.paused||(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),dk));this.o=dk;};ui.prototype.setPlaybackRate=ui.prototype.W;ui.prototype.P=function(){return this.o;};ui.prototype.getPlaybackRate=ui.prototype.P;ui.prototype.aa=function(dk){this.h({restrictions:dk});};ui.prototype.setRestrictions=ui.prototype.aa;ui.prototype.R=function(){return this.c.restrictions.clone();};ui.prototype.getRestrictions=ui.prototype.R;ui.prototype.qa=function(dk){this.B=dk;};ui.prototype.setPlaybackStartTime=ui.prototype.qa;ui.prototype.D=function(){var dk;this.b?(dk=this.b,dk=dk.a?dk.a.b:false):dk=false;return dk;};ui.prototype.isLive=ui.prototype.D;ui.prototype.h=function(dk){if(dk){var ek=wd(dk,"enableAdaptation","boolean");null!=ek&&(this.c.enableAdaptation=ek);ek=ud(dk,"streamBufferSize");null!=ek&&(this.c.streamBufferSize=ek);ek=ud(dk,"licenseRequestTimeout");null!=ek&&(this.c.licenseRequestTimeout=ek);ek=ud(dk,"mpdRequestTimeout");null!=ek&&(this.c.mpdRequestTimeout=ek);ek=ud(dk,"segmentRequestTimeout");null!=ek&&(this.c.segmentRequestTimeout=ek);ek=vd(dk,"preferredLanguage");null!=ek&&(this.c.preferredLanguage=ek);dk=xd(dk,"restrictions",r);null!=dk&&(this.c.restrictions=dk.clone());this.b&&this.b.ha(this.c);}};ui.prototype.configure=ui.prototype.h;ui.prototype.fa=function(){return this.c;};ui.prototype.getConfiguration=ui.prototype.fa;function xi(dk){dk.j&&(i.clearTimeout(dk.j),dk.j=null);}function yi(dk){zi(dk);dk.v=i.setTimeout(dk.T.bind(dk),100);}function zi(dk){dk.v&&(i.clearTimeout(dk.v),dk.v=null);}ui.prototype.w=function(dk,ek,fk){this.j=null;var gk=(Date.now()-ek)/1000*fk;this.a.currentTime<this.A+(this.D()?1:.05)?this.a.pause():(gk=Math.max(this.A,dk+gk),this.a.currentTime=gk,this.j=i.setTimeout(this.w.bind(this,dk,ek,fk),250));};function aj(dk){ma("buffering");var ek=dk.g;ek.bufferingTime+=na("buffering")/1000;dk.i=false;dk.dispatchEvent(qa({type:"bufferingEnd"}));}ui.prototype.T=function(){yi(this);if(!this.a.ended&&!this.a.seeking){var dk=this.a.buffered,ek=dk.length?dk.end(dk.length-1):0,dk=Math.max(ek-this.a.currentTime,0),fk=this.a.duration,gk=this.a.currentTime;if(this.i){var hk,ek=this.b,ik=null;for(hk in ek.c){var jk=ek.c[hk].sa();0<jk&&(ik=null!=ik?Math.min(ik,jk):jk);}hk=ik||0;fk=Math.max(fk-gk-.05,0);if(dk>hk||dk>fk)aj(this),this.C&&this.a.play();}else fk=isNaN(fk)?0:Math.max(fk-.05,0),!(this.a.paused||ek>=fk||gk>=fk)&&.2>dk&&(this.i=true,this.a.pause(),this.g.bufferingHistory.push((Date.now()+hb)/1000),la("buffering"),this.dispatchEvent(qa({type:"bufferingStart"})));}};var bj={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function cj(){this.a=this.b=null;this.f=new nc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",cj);cj.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};cj.prototype.initialize=function(dk,ek){this.b||this.a||(this.b=dk,this.a=ek);};cj.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,oc(this.f,this.b,"bandwidth",this.l.bind(this)),oc(this.f,this.a,"adaptation",this.j.bind(this)),oc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};cj.prototype.enable=function(dk){this.i=dk;};cj.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var dk=dj(this);return dk?dk.id:null;};cj.prototype.selectVideoTrack=function(dk,ek,fk){this.g&&this.a.selectVideoTrack(dk.id,ek,fk);};cj.prototype.l=function(){Date.now()<this.c||this.h();};cj.prototype.h=function(){if(this.i){var dk=dj(this);if(dk){if(dk.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(dk,false);}this.c=Number.POSITIVE_INFINITY;}};cj.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function dj(dk){var ek=dk.a.D();if(0==ek.length)return null;ek.sort(q);var fk;dk:{fk=dk.a.S();for(var gk=0;gk<fk.length;++gk)if(fk[gk].active){fk=fk[gk];break dk;}fk=null;};fk=fk?fk.bandwidth:0;dk=dk.b.getBandwidth();for(var gk=ek[0],hk=0;hk<ek.length;++hk){var ik=ek[hk],jk=hk+1<ek.length?ek[hk+1]:{bandwidth:Number.POSITIVE_INFINITY};if(ik.bandwidth&&(jk=(jk.bandwidth+fk)/.85,dk>=(ik.bandwidth+fk)/.95&&dk<=jk&&(gk=ik,gk.active)))break;}return gk;}function ej(dk,ek){var fk=dk.bandwidth||Number.MAX_VALUE,gk=ek.bandwidth||Number.MAX_VALUE;return fk<gk?-1:fk>gk?1:0;}function fj(dk,ek,fk){bd.call(this,null);this.a=dk;this.T=ek;this.j=new nc();this.g=new MediaSource();this.f=null;this.da=0;this.b=new jc();this.o=fk;this.o.initialize(ek,this);this.w=false;this.v="en";this.U=false;this.A=null;this.i=new ec();this.ja=new ec();this.h=new r();this.l=null;this.ea=1;this.c={};this.P=new ec();this.B=0;this.aa=false;this.u={};this.L=this.C=this.Y=null;this.M={};}m(fj,bd);l("shaka.player.StreamVideoSource",fj);fj.prototype.ha=function(dk){null!=dk.streamBufferSize&&(this.M.streamBufferSize=dk.streamBufferSize);null!=dk.segmentRequestTimeout&&(this.M.segmentRequestTimeout=dk.segmentRequestTimeout);bk(this);null!=dk.enableAdaptation&&this.o.enable(Boolean(dk.enableAdaptation));null!=dk.mpdRequestTimeout&&(this.da=Number(dk.mpdRequestTimeout));null!=dk.preferredLanguage&&(this.v=fb(String(dk.preferredLanguage)));null!=dk.restrictions&&(this.h=dk.restrictions,this.w&&kj(this));};fj.prototype.destroy=function(){this.i.destroy();this.P.destroy();this.P=this.i=null;this.C&&(i.clearTimeout(this.C),this.C=null);this.Y&&(i.clearTimeout(this.Y),this.Y=null);this.u=null;this.j.destroy();this.j=null;td(this.c).forEach(function(dk){dk.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.s=this.h=this.A=this.f=this.g=this.T=this.o=null;};function gj(dk,ek){oc(dk.j,dk.g,"sourceopen",dk.Ka.bind(dk));ek.src=i.URL.createObjectURL(dk.g);}function hj(dk,ek,fk){if(!dk.w)return dk=Error("Cannot call attach() right now."),dk.type="stream",Promise.reject(dk);dk.s=ek;dk.f=fk;dk.A=ek.Ba();oc(dk.j,dk.T,"bandwidth",dk.cb.bind(dk));ek=dk.f.setMediaKeys(dk.f.mediaKeys);dk.ja.then(ab(dk,function(){pj(this).then(ab(this,function(){this.i&&this.i.resolve();})).catch(ab(this,function(gk){this.i&&this.i.reject(gk);}));}));return Promise.all([dk.i,ek]);}fj.prototype.X=function(){if(this.w){var dk=Error("Cannot call load() right now.");dk.type="stream";return Promise.reject(dk);}if(!this.a||0==this.a.a.length)return dk=Error("The manifest does not specify any content."),dk.type="stream",Promise.reject(dk);if(this.a.b)return dk=Error("Live manifest support not enabled."),dk.type="stream",Promise.reject(dk);for(var dk=this.a.a,ek=0;ek<dk.length;++ek)for(var fk=dk[ek],gk=0;gk<fk.a.length;++gk){for(var hk=fk.a[gk],ik=hk,jk=0;jk<ik.a.length;++jk)vi(hh(ik.a[jk]))||(ik.a.splice(jk,1),--jk);0==hk.a.length&&(fk.a.splice(gk,1),--gk);}for(ek=0;ek<dk.length;++ek)for(fk=dk[ek],gk=0;gk<fk.a.length;++gk)fk.a[gk].a.sort(ej);if(0==this.a.a.length||0==this.a.a[0].a.length)return dk=Error("The manifest specifies content that cannot be displayed on this browser/platform."),dk.type="stream",Promise.reject(dk);this.w=true;this.M.initialStreamBufferSize=this.a.c;bk(this);kj(this);return Promise.resolve();};fj.prototype.D=function(){if(!this.b.a.hasOwnProperty("video"))return [];for(var dk=this.c.video,dk=(dk=dk?dk.ka():null)?dk.b:0,ek=[],fk=this.b.get("video"),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];if(jk.H&&jk.a){var kk=jk.b,jk=new p(kk,jk.bandwidth,jk.width,jk.height);kk==dk&&(jk.active=true);ek.push(jk);}}return ek;};fj.prototype.getVideoTracks=fj.prototype.D;fj.prototype.S=function(){if(!this.b.a.hasOwnProperty("audio"))return [];for(var dk=this.c.audio,dk=(dk=dk?dk.ka():null)?dk.b:0,ek=[],fk=this.b.get("audio"),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=hk.lang,jk=0;jk<hk.a.length;++jk){var kk=hk.a[jk];if(kk.H&&kk.a){var lk=kk.b,kk=new n(lk,kk.bandwidth,ik);lk==dk&&(kk.active=true);ek.push(kk);}}return ek;};fj.prototype.getAudioTracks=fj.prototype.S;fj.prototype.ia=function(){if(!this.b.a.hasOwnProperty("text"))return [];for(var dk=this.c.text,ek=dk?dk.ka():null,ek=ek?ek.b:0,fk=[],gk=this.b.get("text"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=ik.lang,kk=0;kk<ik.a.length;++kk){var lk=ik.a[kk].b,mk=new o(lk,jk);lk==ek&&(mk.active=true,mk.enabled=dk.ra());fk.push(mk);}return fk;};fj.prototype.getTextTracks=fj.prototype.ia;function ij(dk,ek){if(dk.w){for(var fk={},gk=dk.a.a[0],hk=0;hk<gk.a.length;++hk){var ik=gk.a[hk];fk[ik.b]=ik;}dk.b.a={};gk=mc(ek);for(hk=0;hk<gk.length;++hk){var ik=gk[hk],jk=ek.get(ik);if("video"==ik){var kk=jk[0].id;dk.b.push(ik,fk[kk]);}else if("audio"==ik){for(var kk=jk[0].b.split(";")[0],lk=0;lk<jk.length;++lk){var mk=jk[lk];mk.b.split(";")[0]==kk&&dk.b.push(ik,fk[mk.id]);}}else for(lk=0;lk<jk.length;++lk)kk=jk[lk].id,dk.b.push(ik,fk[kk]);}dk.U=true;if(fk=dk.b.get("audio"))oj(dk,fk),dk.b.a.audio=fk,fk=fk[0].lang||dk.v,cb(2,dk.v,fk)&&(dk.U=false);if(fk=dk.b.get("text"))oj(dk,fk),dk.b.a.text=fk,fk=fk[0].lang||dk.v,cb(2,dk.v,fk)||(dk.U=false);}}fj.prototype.selectVideoTrack=function(dk,ek,fk){return nj(this,"video",dk,ek,fk);};function jj(dk,ek){var fk=dk.c.text;fk&&fk.la(ek);}function kj(dk){if(dk.h){for(var ek=false,fk=0;fk<dk.a.a.length;++fk)for(var gk=dk.a.a[fk],hk=0;hk<gk.a.length;++hk){var ik=gk.a[hk];if("video"==ik.contentType)for(var jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk],lk=kk.a;kk.a=true;dk.h.maxWidth&&kk.width>dk.h.maxWidth&&(kk.a=false);dk.h.maxHeight&&kk.height>dk.h.maxHeight&&(kk.a=false);dk.h.maxBandwidth&&kk.bandwidth>dk.h.maxBandwidth&&(kk.a=false);dk.h.minBandwidth&&kk.bandwidth<dk.h.minBandwidth&&(kk.a=false);lk!=kk.a&&(ek=true);}}0!=kc(dk.b).length&&ek&&(mj(dk),0<dk.D().length||(ek=Error("The applicaion has restricted all video tracks!"),ek.type="stream",ek=ra(ek),dk.dispatchEvent(ek)));}}function lj(dk,ek){for(var fk,gk=false,hk=new jc(),ik=kc(dk.b),jk=0;jk<ik.length;++jk)for(var kk=ik[jk],lk=0;lk<kk.a.length;++lk){var mk=kk.a[lk];mk.g.forEach(function(nk){hk.push(nk,mk);});}for(fk in ek)if(ik=dc[ek[fk]]||null,kk=hk.get(fk)){for(jk=0;jk<kk.length;++jk)mk=kk[jk],lk=mk.H,mk.H=!ik,lk!=mk.H&&(gk=true);}else ib(fk);gk&&(mj(dk),gk=dk.S(),fk=dk.D(),gk=dk.b.a.hasOwnProperty("audio")&&0==gk.length,fk=dk.b.a.hasOwnProperty("video")&&0==fk.length,gk||fk)&&(fk=Error("The key system has restricted all "+(gk&&fk?"audio and video tracks.":gk?"audio tracks.":"video tracks.")),fk.type="drm",fk=ra(fk),dk.dispatchEvent(fk));}function mj(dk){var ek=qa({type:"trackschanged",bubbles:true});dk.dispatchEvent(ek);}function nj(dk,ek,fk,gk,hk){if(!dk.b.a.hasOwnProperty(ek)||!dk.c[ek])return false;for(var ik=dk.b.get(ek),jk=0;jk<ik.length;++jk)for(var kk=ik[jk],lk=0;lk<kk.a.length;++lk){var mk=kk.a[lk];if(mk.b==fk){if(!mk.H||!mk.a)return false;if("text"!=ek&&!dk.aa)return fk=dk.u[ek],dk.u[ek]={Ea:mk,ua:null!=fk&&fk.ua||gk,va:null!=fk&&fk.va||hk},true;ai(dk.A,mk);dk.c[ek].ma(mk,gk,hk);return true;}}return false;}function oj(dk,ek){for(var fk=0;2>=fk;++fk)for(var gk=0;gk<ek.length;++gk){var hk=ek[gk];if(cb(fk,dk.v,hk.lang)){ek.splice(gk,1);ek.splice(0,0,hk);return;}}for(gk=0;gk<ek.length;++gk)if(hk=ek[gk],hk.f){ek.splice(gk,1);ek.splice(0,0,hk);break;}}j=fj.prototype;j.Ka=function(){this.j.$(this.g,"sourceopen");this.ja.resolve();};function pj(dk){for(var ek=[],fk=["audio","video","text"],gk=0;gk<fk.length;++gk){var hk=fk[gk];dk.b.a.hasOwnProperty(hk)&&ek.push(dk.b.get(hk)[0]);}for(var ik=qj(dk,ek),gk=0;gk<fk.length;++gk)if(hk=fk[gk],dk.b.a.hasOwnProperty(hk)&&!ik[hk])return dk=Error("Unable to select an initial "+hk+" stream: all "+hk+" streams have been restricted (by the application or by the key system)."),dk.type="stream",Promise.reject(dk);ek=td(ik).map(function(jk){return jk.F.create();});return Promise.all(ek).then(ab(dk,function(jk){if(!jk.every(function(kk){return kk.length();}))return jk=Error("Some streams are not available."),jk.type="stream",Promise.reject(jk);jk=zj(this,jk);if(!jk)return jk=Error("Some streams are not available."),jk.type="stream",Promise.reject(jk);if(!rj(this,ik))return jk=Error("Failed to create Stream objects."),jk.type="stream",Promise.reject(jk);this.o.start();tj(this,ik,jk);return Promise.resolve();})).catch(ab(dk,function(jk){if("aborted"!=jk.type)return Object.keys(this.c),this.a.b?(this.jb(),Promise.resolve()):Promise.reject(jk);}));}function qj(dk,ek){for(var fk={},gk=0;gk<ek.length;++gk){var hk=ek[gk],ik=null;if("video"==hk.contentType){var jk=dk.o.getInitialVideoTrackId();if(null==jk)continue;ik=hk.a.filter(function(kk){return kk.b==jk;});if(0==ik.length)continue;ik=ik[0];}else if("audio"==hk.contentType){ik=hk.a.filter(function(kk){return kk.H&&kk.a;});if(0==ik.length)continue;ik=hk.a[Math.floor(ik.length/2)];}else 0<hk.a.length&&(ik=hk.a[0]);fk[hk.contentType]=ik;}return fk;}function rj(dk,ek){var fk={},gk;for(gk in ek){var hk=ek[gk],hk="text"==gk?new li(dk,dk.f):sj(dk,hk);if(!hk)return td(fk).forEach(function(ik){ik.destroy();}),false;fk[gk]=hk;}dk.c=fk;return true;}function sj(dk,ek){var fk=new di(dk,dk.f,dk.g,hh(ek),dk.T);fk.A(dk.M);return fk;}function tj(dk,ek,fk){dk.ea=dk.f.playbackRate;dk.f.playbackRate=0;vj(dk,fk);var gk;gk=dk.a.b?fk.end:dk.L&&dk.L<=fk.end&&dk.L>=fk.start?dk.L:fk.start;oc(dk.j,dk.f,"seeking",dk.Pa.bind(dk));dk.f.currentTime!=gk&&(dk.f.currentTime=gk,dk.l=gk);wj(dk,fk.start,fk.end);fk=[];for(var hk in dk.c){gk=dk.c[hk];fk.push(gk.Da(dk.P));oc(dk.j,gk,"ended",dk.Ra.bind(dk));var ik=ek[hk];ai(dk.A,ik);gk.ma(ik,false);}Promise.all(fk).then(dk.Ga.bind(dk)).catch(ab(dk,function(jk){"destroy"!=jk.type&&(jk=ra(jk),this.dispatchEvent(jk));}));jj(dk,dk.U);}j.Ga=function(dk){z(dk&&dk.length==Object.keys(this.c).length);for(var ek=Number.POSITIVE_INFINITY,fk=Number.NEGATIVE_INFINITY,gk=0;gk<dk.length;++gk)var hk=dk[gk],ek=Math.min(ek,hk),fk=Math.max(fk,hk);dk=yj(this);for(gk=0;gk<dk.length;++gk)xg(dk[gk],fk);uj(this,dk,fk);gk=kc(this.b).map(function(ik){return ik.a;}).reduce(function(ik,jk){return ik.concat(jk);},[]).map(function(ik){var jk=[ik.F.create()];ik.K&&jk.push(ik.K.create());return Promise.all(jk);});Promise.all(gk).then(ab(this,function(ik){for(var jk=0;jk<ik.length;++jk)xg(ik[jk][0],fk);this.aa=true;for(var kk in this.u)ik=this.u[kk],jk=this.c[kk],ai(this.A,ik.Ea),jk.ma(ik.Ea,ik.ua,ik.va);this.u={};})).catch(ab(this,function(ik){"aborted"!=ik.type&&(ik=ra(ik),this.dispatchEvent(ik));}));};function uj(dk,ek,fk){if(ek=zj(dk,ek))vj(dk,ek),wj(dk,ek.start,ek.end);0!=fk?(fk=dk.f.currentTime+fk,dk.f.currentTime=fk,dk.l=fk):fk=dk.f.currentTime;dk.a.b&&ek&&(dk.B=ek.end-fk,dk.B=Math.max(dk.B,0));dk.f.playbackRate=dk.ea;dk.a.b&&null!=dk.a.f&&dk.kb(dk.B);ak(dk);dk.P.resolve();}function vj(dk,ek){if(dk.a.b){isNaN(dk.g.duration)&&(dk.g.duration=ek.end+2592000);}else if(isNaN(dk.g.duration)||ek.end>dk.g.duration){dk.g.duration=ek.end;for(var fk=0;fk<dk.g.sourceBuffers.length;++fk)dk.g.sourceBuffers[fk].appendWindowEnd=ek.end;}}j.Ta=function(){this.C=null;ak(this);var dk=zj(this,yj(this));dk&&(wj(this,dk.start,dk.end),this.f.paused||xj(this,this.f.currentTime,dk.start,dk.end));};function wj(dk,ek,fk){ek=qa({type:"seekrangechanged",bubbles:true,start:ek,end:fk});dk.dispatchEvent(ek);}j.Pa=function(){var dk=this.f.currentTime;if(null!=this.l){if(dk>=this.l-.01&&dk<=this.l+.01){this.l=null;return;}this.l=null;}var ek=zj(this,yj(this));if(ek){var fk=ek.end;(ek=xj(this,dk,ek.start,fk))||(dk<=fk+.01?ek=false:(this.f.currentTime=fk,ek=true));if(!ek)for(var gk in this.c)this.c[gk].za();}};function xj(dk,ek,fk,gk){if(ek>=fk-.01)return false;ek=0;if(dk.a.b){ek=.5;for(var hk in dk.c)if(!dk.c[hk].Aa(fk+ek)){ek=dk.a.c;break;}}dk.f.currentTime=Math.min(fk+ek,gk);return true;}j.Ra=function(){if(!this.a.b){for(var dk in this.c)if(!this.c[dk].xa())return;this.g.endOfStream();}};j.cb=function(){var dk=this.A,ek=this.T.getBandwidth();dk.estimatedBandwidth=ek;dk.bandwidthHistory.push(new ci(ek));};function yj(dk){return td(dk.c).map(function(ek){return ek.wa();}).filter(function(ek){return null!=ek;});}function zj(dk,ek){for(var fk=0,gk=Number.POSITIVE_INFINITY,hk=0;hk<ek.length;++hk){var ik;ik=ek[hk];ik=0<ik.length()?{start:ug(ik).b,end:vg(ik).a}:{start:0,end:0};fk=Math.max(fk,ik.start);null!=ik.end&&(gk=Math.min(gk,ik.end));}if(gk==Number.POSITIVE_INFINITY)if(gk=dk.a.a[0],gk.b){gk=(gk.start||0)+gk.b;}else return null;dk.a.b&&(gk=Math.max(gk-(dk.a.c+dk.B),fk));return fk>gk?null:{start:fk,end:gk};}function ak(dk){dk.a.b&&(dk.C=i.setTimeout(dk.Ta.bind(dk),1000));}function bk(dk){for(var ek in dk.c)dk.c[ek].A(dk.M);}function ck(dk,ek,fk,gk){fk||(fk=new qd());gk||(gk=new cj());fj.call(this,null,fk,gk);"string"===typeof dk?this.na=dk:this.ga=dk;this.fa=ek;this.W=[];this.ba=[];this.ca=[];this.R=null;}m(ck,fj);l("shaka.player.DashVideoSource",ck);ck.prototype.pa=function(dk,ek,fk){this.W.push(dk);this.ba.push(ek||"");this.ca.push(fk||"");};ck.prototype.addExternalCaptions=ck.prototype.pa;ck.prototype.qa=function(dk){this.R=dk;};ck.prototype.setNetworkCallback=ck.prototype.qa;ck.prototype.destroy=function(){this.R=this.fa=null;fj.prototype.destroy.call(this);};ck.prototype.X=function(){var dk=ab(this,function(fk){for(var gk=0;gk<this.W.length;gk++){var hk=fk,ik=this.W[gk],jk=this.ba[gk],kk=this.ca[gk];if(0!==hk.a.length){var lk=new qe();lk.contentType="text";lk.lang=jk||"en";lk.c=true;jk=new te();jk.bandwidth=0;jk.f=kk||"text/vtt";jk.m=[new zd(ik)];lk.a.push(jk);hk.a[0].b.push(lk);hf(hk.a[0]);}}if("dynamic"==fk.type)return fk=Error("Live manifest support not enabled."),fk.type="stream",Promise.reject(fk);gk=new oh(this.fa);hk=this.R;ik=(Date.now()+hb)/1000;for(kk=0;kk<fk.a.length;++kk)for(lk=fk.a[kk],jk=0;jk<lk.b.length;++jk){var mk=lk.b[jk];if("text"!=mk.contentType)for(var nk=0;nk<mk.a.length;++nk){var ok=mk.a[nk],pk=0,pk=pk+(ok.g?1:0),pk=pk+(ok.b?1:0),pk=pk+(ok.a?1:0);0==pk?(mk.a.splice(nk,1),--nk):1!=pk&&(ok.g?(ok.b=null,ok.a=null):ok.b&&(ok.a=null));}}ph(fk);for(kk=0;kk<fk.a.length;++kk)for(lk=fk.a[kk],jk=0;jk<lk.b.length;++jk){nk=mk=lk.b[jk];ok=null;for(pk=0;pk<nk.a.length;++pk){var qk=nk.a[pk].f||"";ok?qk!=ok&&(nk.a.splice(pk,1),--pk):ok=qk;}0==mk.a.length&&(lk.b.splice(jk,1),--jk);}"dynamic"==fk.type&&null==fk.c&&(fk.c=ik);ik=new mh();"dynamic"==fk.type&&(ik.b=true,ik.f=fk.f,ik.h=new gg(hk,fk.j||fk.url),ik.g=fk.c);ik.c=fk.g||5;for(kk=0;kk<fk.a.length;++kk){lk=fk.a[kk];if(null==lk.start)break;lk=qh(gk,fk,lk,hk);ik.a.push(lk);}this.a=ik;return fj.prototype.X.call(this);});if(this.ga)return dk(this.ga);var ek=[new zd(this.na)],ek=new gg(this.R,ek);return lg(new kg(ek,this.da)).then(dk);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoPlayerHTML5Shaka',['BlobFactory','EventEmitter','EventListener','Event','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=c('Shaka').player,q=p.Player,r=p.DashVideoSource,s=p.VideoTrack,t=c('Shaka').dash.mpd.parseMpd,u=c('Shaka').util,v=u.EWMACacheBandwidthEstimator,w=u.EWMASignedURLBandwidthEstimator,x=l.enableAdaptation?new v(l.cacheDelay,l.cacheBandwidth):new w();c('Shaka').polyfill.Fullscreen.install();function y(da){var ea=da.getVideoTracks();ea.sort(s.compare);return ea.pop().id;}function z(da){var ea=da.getVideoTracks();ea.sort(s.compare);return ea.shift().id;}function aa(da){var ea=h.getBlob([da]);return URL.createObjectURL(ea);}function ba(da,ea){'use strict';this.$DisabledAbrManager1=da;this.$DisabledAbrManager2=ea;}ba.prototype.initialize=function(da,ea){'use strict';this.$DisabledAbrManager3=ea;};ba.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(y(this.$DisabledAbrManager3),false);};ba.prototype.enable=function(){'use strict';};ba.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return z(this.$DisabledAbrManager3);var da=this.$DisabledAbrManager1?y(this.$DisabledAbrManager3):z(this.$DisabledAbrManager3);return da;};ba.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};n=babelHelpers.inherits(ca,i);o=n&&n.prototype;function ca(da,ea,fa){'use strict';var ga=fa.playHighQualityTrack;o.constructor.call(this);this.$VideoPlayerHTML5Shaka1=true;var ha=j.listen(da,'playing',(function(){this.$VideoPlayerHTML5Shaka1=false;ha.remove();}).bind(this));this.$VideoPlayerHTML5Shaka2=new q(da);this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingStart',(function(){return this.$VideoPlayerHTML5Shaka3();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingEnd',(function(){return this.$VideoPlayerHTML5Shaka4();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('error',(function(){return this.$VideoPlayerHTML5Shaka5();}).bind(this));var ia=l.enableAdaptation?null:new ba(ga,l.switchFromLowQuality),ja=t(ea),ka=new r(ja,null,x,ia);this.$VideoPlayerHTML5Shaka6=da;this.$VideoPlayerHTML5Shaka2.configure({enableAdaptation:l.enableAdaptation,streamBufferSize:l.streamBufferSize,initialStreamBufferSize:l.initialStreamBufferSize});this.$VideoPlayerHTML5Shaka2.load(ka);}ca.prototype.selectHighestQualityTrack=function(){'use strict';this.$VideoPlayerHTML5Shaka2.selectVideoTrack(y(this.$VideoPlayerHTML5Shaka2),true);};ca.prototype.selectLowestQualityTrack=function(){'use strict';this.$VideoPlayerHTML5Shaka2.selectVideoTrack(z(this.$VideoPlayerHTML5Shaka2),false);};ca.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka7){this.$VideoPlayerHTML5Shaka8=true;this.$VideoPlayerHTML5Shaka9=true;m(this.$VideoPlayerHTML5Shaka6,'pause');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka6.pause();};ca.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka7){this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=true;m(this.$VideoPlayerHTML5Shaka6,'play');m(this.$VideoPlayerHTML5Shaka6,'waiting');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka6.play();};ca.prototype.$VideoPlayerHTML5Shaka3=function(){'use strict';var da=j.capture(this.$VideoPlayerHTML5Shaka6.parentNode,'pause',(function(ea){if(ea.target!=this.$VideoPlayerHTML5Shaka6)return;da.remove();k.kill(ea);}).bind(this));this.$VideoPlayerHTML5Shaka7=true;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);this.emit('bufferingStart');};ca.prototype.$VideoPlayerHTML5Shaka4=function(){'use strict';var da=this;if(!this.$VideoPlayerHTML5Shaka8)(function(){var ea=j.capture(da.$VideoPlayerHTML5Shaka6.parentNode,'play',(function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka6)return;ea.remove();k.kill(fa);}).bind(da));})();if(!this.$VideoPlayerHTML5Shaka9)(function(){var ea=j.capture(da.$VideoPlayerHTML5Shaka6.parentNode,'playing',(function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka6)return;ea.remove();if(this.$VideoPlayerHTML5Shaka1){this.$VideoPlayerHTML5Shaka1=false;return;}k.kill(fa);}).bind(da));})();this.$VideoPlayerHTML5Shaka7=false;this.emit('bufferingEnd');};ca.prototype.$VideoPlayerHTML5Shaka5=function(){'use strict';this.emit('error');};ca.prototype.hasMultipleVideoTracks=function(){'use strict';var da=this.$VideoPlayerHTML5Shaka2.getVideoTracks();return da.length>1;};ca.prototype.destroy=function(){'use strict';this.$VideoPlayerHTML5Shaka2.unload();this.$VideoPlayerHTML5Shaka2=null;};ca.isSupported=function(){'use strict';return q.isBrowserSupported();};f.exports=ca;},null);