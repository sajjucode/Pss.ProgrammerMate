/*!CK:2569530082!*//*1449234798,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dw8Ho"]); }

__d('ReactComposerPhoto.react',['ReactComposerMediaConfig','ReactComposerPhotoTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','Image.react','ImageBlock.react','immutable','LoadingIndicator.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','XUICloseButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=q.PropTypes,ba=q.createClass({displayName:'ReactComposerPhoto',mixins:[p,r,j(k)],propTypes:{canTagFromModal:aa.bool,draggingPhotos:aa.bool,enableFaceboxTagger:aa.bool,disablePhotoEditing:aa.bool,faceboxes:aa.instanceOf(n.Map).isRequired,onEditClick:aa.func,onRemoveButtonClicked:aa.func.isRequired,onTagAdded:aa.func.isRequired,onTaggingNUXClose:aa.func,onTagIntent:aa.func,onTagRemoved:aa.func.isRequired,originalID:aa.string,photoID:aa.string.isRequired,showStickersNUX:aa.bool,showTaggingNUX:aa.bool,thumbSrc:aa.string.isRequired},getDefaultProps:function(){return {enableFaceboxTagger:true,disablePhotoEditing:false};},statics:{calculateState:function(ca,da){return {posting:k.isPosting(ca)};}},render:function(){var ca={width:h.photo.thumbWidth,height:h.photo.thumbHeight},da=this.props.isRecognizingFaceboxes?q.createElement('div',{className:"_jff"},q.createElement(o,{className:"_jfg",size:'small',color:'white'})):null,ea="_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),fa,ga;if(!this.state.posting){fa=q.createElement(t,{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});ga=q.createElement(i,{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger});}return (q.createElement('div',{ref:'root',className:ea,style:ca},fa,q.createElement(l,{src:this.props.thumbSrc,width:h.photo.thumbWidth,height:h.photo.thumbHeight}),da,ga));},renderLayers:function(){return {taggingNUX:this.props.enableFaceboxTagger?this._getTaggingNux():null,stickersNUX:this.props.disablePhotoEditing?null:this._getStickersNux()};},_getTaggingNux:function(){return (q.createElement(u,{contextRef:(function(){return this.refs.root;}).bind(this),position:'below',alignment:'left',shown:this.props.showTaggingNUX,width:300},q.createElement(v,null,q.createElement(t,{className:"rfloat",onClick:this.props.onTaggingNUXClose}),q.createElement('div',null,q.createElement(w,{weight:'bold',display:'block'},y._("Now It's Easier to Tag Photos.")),y._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[y.param('tagging_badge_icon',q.createElement(l,{src:z('/images/photos/tagging_badge_white.png')}))])))));},_getStickersNux:function(){return (q.createElement(s,{alignment:'right',contextRef:(function(){return this.refs.root;}).bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:'below',shown:this.props.showStickersNUX},q.createElement(m,{spacing:'medium'},q.createElement(l,{src:z('/images/photos/editor/beast.png')}),q.createElement('div',{className:"_21ft"},q.createElement('div',{className:"_21fs"},y._("New! Add Stickers!")),y._("You can now add stickers to your photos")))));}});f.exports=ba;},null);