/*!CK:1293442108!*//*1449519519,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["DaMWx"]); }

__d("BirthdayRemindersCounterEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={OPEN_MODAL:"open_modal",PHOTO_FLOW_WITHOUT_PERSONALIZED:"photo_flow_without_personalized",PHOTO_FLOW_WITH_PERSONALIZED:"photo_flow_with_personalized",ADD_PERSONALIZED_PHOTO:"add_personalized_photo",CLICK_ALBUM:"click_album",ADD_ALBUM_PHOTO:"add_album_photo",SELFIE_FLOW:"selfie_flow",ADD_SELFIE:"add_selfie",ADD_UPLOADED:"add_uploaded",POST_WITH_PHOTO:"post_with_photo",POST_WITHOUT_PHOTO:"post_without_photo",POST_NON_SCHEDULED:"post_non_scheduled",POST_SCHEDULED:"post_scheduled",CANCEL_SCHEDULED_MODAL:"cancel_scheduled_modal",CANCEL_SCHEDULED_TIMELINE:"cancel_scheduled_timeline"};},null);
__d("ComposerNUXType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CAMERA_NUX:"camera_nux_seen",ADD_MORE_NUX:"add_more_nux_seen",OGCOMPOSER_NUX:"ogcomposer_nux_seen",FACEREC_SUGGESTIONS_NUX:"facerec_suggestions_nux_seen",TAGGING_FLYOUT_NUX:"tagging_flyout_nux_seen",OGCOMPOSER_NEW_ICON_PICKER_NUX:"minutiae_icon_picker_nux_seen",SHARER_MINUTIAE_NUX:"sharer_minutiae_nux_seen",ADD_STICKERS_NUX:"add_stickers_nux_seen",UPCOMING_BIRTHDAYS_NUX:"upcoming_birthdays_nux_seen",CROSS_POST_NUX:"cross_post_nux_seen"};},null);
__d('ComposerXNUX',['AsyncRequest','ComposerXDragDropUtils','CSS','DOM','Event','SubscriptionsHandler','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q={};function r(t,u,v){var w=v.dataTransfer.items;if(w){var x=i.filterImages(w);if(!x.length)return;}s.acknowledgeDialog(t,u);}var s={onInit:function(t,u,v){if(p[v])return;q[v]=q[v]||new m();var w=q[v];w.engage();var x=t.getRoot();j.addClass(x,"_4bka");var y=k.scry(x,"._3o-a");y.forEach(function(z){w.addSubscriptions(l.listen(z,'click',s.acknowledgeDialog.bind(null,v,t)));});if(v==s.CAMERA_NUX)w.addSubscriptions(l.listen(document,'dragenter',r.bind(null,v,t)));w.addSubscriptions(t.subscribe('cancel',s.sendMarkSeenRequest.bind(null,v)),t.subscribe('hide',w.release.bind(w)));t.setContext(u).show();},acknowledgeDialog:function(t,u){s.sendMarkSeenRequest(t);u.hide();},sendMarkSeenRequest:function(t){if(!p[t]){new h('/ajax/photos/composer/mark_nux_seen.php').setData({type:t}).send();p[t]=true;}},onCleanup:function(t){t.hide();}};f.exports=s;},null);
__d('GoodwillThrowbackBanzaiLogger',['BanzaiLogger'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.prototype.logShareEvent=function(j,k){'use strict';var l=this;j.onclick=function(){l.logEvent(k.event,k);};};i.prototype.logClickEvent=function(j,k){'use strict';var l=this;j.onclick=function(){l.logEvent(k.event,k);};};i.prototype.logEvent=function(event,j){'use strict';var k=babelHelpers._extends({event:event},j);h.log('GoodwillThrowbackProductLoggerConfig',k);};function i(){'use strict';}f.exports=new i();},null);
__d("XBirthdayRemindersCounterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/birthday\/reminder\/counter\/",{event:{type:"Enum",required:true,enumType:1}});},null);
__d('BirthdayRemindersCounter',['AsyncSignal','XBirthdayRemindersCounterController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={logEvent:function(event){var k=i.getURIBuilder().setEnum('event',event).getURI();new h(k).send();}};f.exports=j;},null);
__d("XBirthdayRemindersCameraPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/birthday\/reminder\/camera\/preview\/",{photo_fbid:{type:"Int",required:true},target_id:{type:"Int",required:true}});},null);
__d('BirthdayModal',['AsyncRequest','BirthdayRemindersCounter','BirthdayRemindersCounterEvent','Button','ComposerNUXType','ComposerXNUX','CSS','DataStore','DOM','Event','FileInputUploader','Focus','Layer','Parent','XBirthdayRemindersCameraPreviewController','csx','cx','focusWithinLayer','getActiveElement','goURI','setImmediate','BirthdaysReminder'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=null,ea={},fa={},ga,ha={},ia={},ja={init:function(ka,la,ma,na){if(!fa.hasOwnProperty(na))fa[na]=ma;ha[na]=ka;ia[na]=la;q.listen(ka,'click',(function(oa){i.logEvent(j.OPEN_MODAL);ma.show();}).bind(this));},initAsyncDialog:function(ka,la){fa[la]=ka;ba(function(){z().blur();y(ka.getRoot());});},addComposers:function(ka,la,ma){if(ma===ca.LayoutTypes.MULTIPLE){var na=ma.concat(la);if(!ea.hasOwnProperty(na))ea[na]=ka;this._addComposer(p.find(ka,"._5j0b"),la,ma);}else{if(!la||la!==da)ea={};da=la;for(var oa in ka)if(ka.hasOwnProperty(oa))this._addComposer(p.find(ka[oa],"._5j0b"),oa,ma);}},_showInput:function(ka){var la=p.scry(ka,"._u48").pop();if(!la)return;var ma=p.find(ka,"._4ovy"),na=p.find(ma,'.inlineReplyTextArea');n.hide(la);n.show(ma);s.set(na);},_addComposer:function(ka,la,ma){var na=ma.concat(la);ea[na]=ka;var oa=p.scry(ka,"._4ovw").pop();if(!oa)return;var pa=this;['click','focus'].forEach(function(ra){q.listen(oa,ra,function(event){var sa=event.getTarget();if(u.byClass(sa,"_260q"))return;pa._showInput(ka);});});var qa=p.find(ka,"._4ow2");this._addRemoveButton(qa,la,na);return true;},addUpcomingBirthdays:function(ka,la){q.listen(la.firstChild,'click',function(event){n.show(ka);n.hide(la);});},attachPhoto:function(ka,la,ma,na){var oa=na.concat(ma),pa=ea[oa];if(!pa)return;var qa=p.find(pa,"._4ovz");n.removeClass(qa,"._4ow0");var ra=p.find(pa,"._4ow1");ra.appendChild(la);p.appendContent(qa,ka);var sa=p.find(pa,"._4ow2");n.show(sa);this._showInput(pa);var ta=p.find(pa,"._30e4");k.setEnabled(ta,true);},initUploader:function(ka,la,ma,na,oa){var pa=ka.getInput();ka.subscribe('change',this._uploadPhoto.bind(this,pa,na,ma,oa));},_uploadPhoto:function(ka,la,ma,na){var oa=na.concat(ma),pa=ea[oa];if(!pa)return;i.logEvent(j.ADD_UPLOADED);this._showInput(pa);var qa=p.find(pa,"._4ow3"),ra=p.find(pa,"._4ow4");n.show(qa);n.hide(ra);var sa=new r(ka);sa.setURI(la.uploadURI).setData(la.uploadData).setAllowCrossOrigin(true).setUploadInParallel(true).setFiles({file:ka.files[0]}).send();var ta=p.find(pa,"._30e4");k.setEnabled(ta,false);var ua=t.getTopmostLayer();if(ua)ua.hide();},getCameraPreview:function(ka,la){var ma=ca.LayoutTypes.SINGLETON.concat(la),na=ea[ma];if(!na)return;i.logEvent(j.ADD_SELFIE);this._showInput(na);var oa=p.find(na,"._4ow3"),pa=p.find(na,"._4ow4");n.show(oa);n.hide(pa);var qa=v.getURIBuilder().setInt('target_id',la).setInt('photo_fbid',ka).setString('singleton',ca.LayoutTypes.SINGLETON).getURI();new h(qa).send();var ra=p.find(na,"._30e4");k.setEnabled(ra,false);},showPhotoPicker:function(ka,la){ka.subscribeOnce(['show'],(function(){n.addClass(fa[la].getContentRoot(),"_30e3");}).bind(this));ka.subscribeOnce(['hide'],(function(){fa[la].show();n.removeClass(fa[la].getContentRoot(),"_30e3");}).bind(this));},addPhotoItem:function(ka,la,ma,na,oa,pa){var qa=pa.concat(na),ra=ea[qa];if(!ra)return;q.listen(ka,'click',(function(){i.logEvent(oa);var sa=p.find(ra,"._4ow3"),ta=p.find(ra,"._4ovz"),ua=p.find(ra,"._4ow4");n.show(sa);n.hide(ua);n.removeClass(ta,"._4ow0");var va=p.find(ra,"._4ow1");va.appendChild(ma);p.appendContent(ta,la);var wa=p.find(ra,"._4ow2");n.show(wa);this._showInput(ra);var xa=t.getTopmostLayer();if(xa)xa.hide();}).bind(this));},_addRemoveButton:function(ka,la,ma){var na=ea[ma];if(!na)return;q.listen(ka,'click',(function(oa){oa.kill();n.hide(ka);var pa=p.find(na,"._4ow3"),qa=p.find(na,"._4ovz"),ra=p.find(na,"._4ow4");n.hide(pa);n.show(ra);n.addClass(qa,"._4ow0");if(qa.firstChild)p.remove(qa.firstChild);p.scry(na,"._4ow5").forEach(function(sa){p.remove(sa);});}).bind(this));},_resetComposer:function(ka){var la=p.find(ka,"._4ow2");la.click();var ma=p.find(ka,".uiMentionsInput");o.get(ma,'MentionsInput').reset();},finishPosting:function(ka,la,ma,na){if(ma)return aa(window.location.href,true);var oa=na.concat(la),pa=ea[oa];if(!pa)return;this._resetComposer(pa);n.addClass(pa,"_4dgh");if(na===ca.LayoutTypes.MULTIPLE){n.addClass(ha[oa],"_1exi");n.addClass(ia[oa],"_1exj");}},cancelScheduled:function(ka,la){if(la!=='modal')return aa(window.location.href,true);var ma=ca.LayoutTypes.SINGLETON.concat(ka),na=ea[ma];if(!na)return;n.removeClass(na,"_4dgh");},setPhotoAlbumView:function(ka){ga=ka;},setPhotoView:function(ka){if(!ga)return;var la=p.find(ga,"._5r32");if(la){n.hide(la);}else return;var ma=p.find(ga,"._375u");ma.appendChild(ka);var na=p.find(ka,"._375v");q.listen(na,'click',(function(){n.show(la);var oa=p.find(ga,"._375w");p.remove(oa);}).bind(this));},attachFlyout:function(ka){var la=ka.getContext(),ma=p.find(ka.getContentRoot(),"._21xo"),na=p.scry(ka.getContentRoot(),"._15p7").pop(),oa=function(){n.conditionClass(la,"_21xn",ka.isShown());};oa();ka.subscribe(['show','hide'],oa);q.listen(la,'click',function(pa){ka.conditionShow(!ka.isShown());pa.kill();});q.listen(ma,'click',function(){ka.hide();});if(na)q.listen(na,'click',function(){ka.hide();});},initMegaphone:function(ka,la){q.listen(la,'click',function(){p.remove(ka);m.sendMarkSeenRequest(l.UPCOMING_BIRTHDAYS_NUX);});},registerBirthdayPostHandler:function(ka,la,ma){q.listen(ka,'submit',function(event,na){var oa,pa;oa=u.byClass(ka,la);if(oa)for(pa=oa.nextSibling;pa;pa=pa.nextSibling){var qa=p.scry(pa,ma);if(qa.length>0){ja._showInput(pa);break;}}return true;});}};f.exports=ja;},null);