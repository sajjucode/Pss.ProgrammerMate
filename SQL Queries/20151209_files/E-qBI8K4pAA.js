/*!CK:2039467955!*//*1449519519,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6isKa"]); }

__d('ReactFeedComposerXBootloader',['ReactComposerAttachmentType','ReactComposerInit','ReactFeedComposerX.react','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','ReactInputSelection','SubscriptionsHandler','XReactComposerLoggingODSController','$','csx','getActiveElement'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w,x={bootload:function(y,z){var aa=t('pagelet_composer'),ba=o.find(aa,"._559p"),ca=n.hasClass(ba,'async_saving');if(ca){w=new r();w.addSubscriptions(p.listen(ba,'success',(function(){this._bootloadImpl(y,aa,z);}).bind(this)),p.listen(ba,'error',(function(){this._bootloadImpl(y,aa,z);}).bind(this)));}else this._bootloadImpl(y,aa,z);},_bootloadImpl:function(y,z,aa){aa.config.audienceXHP=this._getAudienceSelector(z);aa.prefillConfig=Object.assign(aa.prefillConfig,this._appendPrefillConfig(z));i.init(j,aa,z);var ba=s.getURIBuilder().setString('event','bootload_done').setEnum('composer_type',m.FEEDX).getURI();new l(ba).send();w&&w.release();k.inform('ReactFeedComposerXBootloader/bootload/'+y);},_appendPrefillConfig:function(y){var z=o.find(y,"._3en1"),aa=v()==z||n.hasClass(o.find(y,'.focus_target'),'child_was_focused'),ba=o.scry(y,"._21h8")[0];if(!ba)ba=o.find(y,"._5qtn");ba=ba.getAttribute('data-attachment-type');if(ba===h.NOTES)ba=null;var ca=o.scry(y,"._21h7")[0];if(!ca)ca=o.find(y,"._4d6h");var da=o.scry(ca,'input[name="composer_photo[]"]')[0],ea={text:z.value};return {mentionsInput:{textWithEntities:ea,selection:q.getSelection(z)},instantMediaSelector:{fileInputDOM:da},selectedAttachment:ba,shouldActivateSelectedAttachment:aa};},_getAudienceSelector:function(y){var z=o.find(y,"._ej0"),aa=z.cloneNode(true);z.parentNode.replaceChild(aa,z);return z;}};f.exports=x;},null);